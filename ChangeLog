2009-04-01  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/main.c: Right after initialisation, tell clutter not to mipmap
        fonts. Findings of NB#105969 show this is much faster, and we don't
        need it.
        * debian/control
        * src/mb/hd-comp-mgr.c: Move setting of HD-MBWMCompMgrClutterClient
        in actor to the MBWMCompMgrClutterClient itself - removing the risk
        of a pointer dangling to a destroyed class. Fixed NB#107681

2009-04-01  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* configure.ac: Move -DG_DISABLE_CHECKS to debian/rules.

2009-03-31  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Cleanups in the states.

	* home/hd-title-bar.h
	* home/hd-title-bar.c:
	  Removed empty hd_title_bar_set_show().
	* home/hd-render-manager.h:
	  Removed ineffective STATE_SHOW_TITLE.
	  Removed unused STATE_APP_FULLSCREEN.
	* home/hd-render-manager.c:
	  Updated accordingly.

2009-03-31  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Don't show applets in the background in switcher and launcher views.

	* src/home/hd-render-manager.h:
	  Added STATE_SHOW_APPLETS().
	* src/home/hd-render-manager.c (hd_render_manager_set_state,
	  hd_render_manager_sync_clutter_before):
	  Hide/show HdHome's front container (which contains all applet
	  containers).  Also moved the code that moved the front back
	  and forth from sync_clutter to set_state because it seems to
	  have a better place there.

2009-03-31  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/mb/hd-comp-mgr.c: Check that an actor's stage is valid. It may
         not be if it has no parent

2009-03-31  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/tidy/tidy-highlight.c: Now cache the pixel shader so it isn't 
          loaded once per icon
        * src/mb/hd-animation-actor.c
        * src/mb/hd-animation-actor.h: Removed warnings code for NB#107323,
          as it didn't play well with the fix in libmatchbox

2009-03-31  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  Remove offending g_warning() accidentally left in.

2009-03-31  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/mb/hd-app-menu.c (hd_app_menu_request_geometry):
	honour size and position requests.
	Fixes NB#94957.

2009-03-31  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c (add_nothumb):
	  Don't forget to set the font of the notification text.

2009-03-31  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	  Let us entertain ourselves with another change and don't assume
	  portrait mode support by default.

2009-03-31  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#108599 _HILDON_PORTRAIT_MODE_SUPPORT not inherited with transiency

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_should_be_portrait):
	  Inherit the flag even if the parent is not visible.

2009-03-31  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/tidy/tidy-blur-group.c: Changes to fix blank/garbled screen on
        landscape->portrait transition (when background blurred), NB#107951

2009-03-31  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.32

2009-03-30  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/tidy-blur-group.c: Comment to help make code less cryptic
	* src/tidy/tidy-mem-texture.c: Fix covertity finding about unsigned
	numbers that causes 'if' clause to be true.
	* src/home/hd-render-manager.c: Removed un-needed debug printing

2009-03-30  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-render-manager.c (hd_render_manager_sync_clutter_before):
	  Regression fix.  Don't show the status area in launcher view.
	  Nor in any other states it's not supposed to be there.

2009-03-30  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/mb/hd-desktop.c (hd_desktop_stack): Set
	_HILDON_APPLET_ON_CURRENT_DESKTOP property only when desktop is really
	visible. Fixes: NB#108527

2009-03-30  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/util/hd-transition.c, src/mb/hd-comp-mgr.c,
	src/util/hd-transition.c, src/home/hd-switcher.c,
	src/home/hd-render-manager.c: Adjust behaviour for the new
	mb_wm_comp_mgr_clutter_client_get_actor semantics (no reference).
	* src/mb/hd-comp-mgr.[ch] (hd_comp_mgr_client_get_actor): Removed as
	unused.

2009-03-30  Alejandro Pinheiro <apinheiro@igalia.com>

	* src/a11y/launcher/Makefile.am
	* src/a11y/home/Makefile.am
	Added MB2_CFLAGS, required to compile a11y support after 2009-03-23
	configure.ac changes

2009-03-30  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/mb/hd-decor.c: Handle X errors in hd_decor_window_is_waiting
        in case Window happens to be invalid. Fixed NB#108480
        * src/home/hd-render-manager.c (hd_render_manager_actor_opaque): 
        Extra checks to attempt to avoid NB#107681 (we have no clear way to
        reproduce, so can't test)
        * src/tidy/tidy-blur-group.c: avoided coverity error with hard-coded
        cap on size of variable
        * src/mb/hd-animation-actor.h
        * src/mb/hd-animation-actor.c: Some changes from NB#107323 to give 
        the warnings. This is not a fix yet though.

2009-03-30  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-wm.c (show_info_note): New idle handler.
	(hd_wm_client_responding): Show the information banner in an idle
	handler, otherwise this can cause a lockup in libxcb. Fixes: NB#106919

2009-03-30  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* debian/rules:
	  Recognize the "debug" DEB_BUILD_OPTIONS parameter
	  to enable g_debug() and compile with -O0.

2009-03-30  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/launcher/hd-app-mgr.c (hd_app_mgr_kill):
	  Don't attempt to kill() if pid get < 0 by any accident.

2009-03-30  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#107503 ROTATION: status bar disappearing

	Actually this bug had nothing to do with rotation.
	It was cause by: keylock mapped -> we have a fullscreen client
	-> change state (to portrait) -> sync_clutter hided SA because of
	the fullscreen -> keylock unmapped -> state is NOT changed and
	the stack is not restacked -> SA remained hidden.

	* src/home/hd-render-manager.c (hd_render_manager_sync_clutter_before):
	  Don't show/hide the status area here, it's enough to do it during
	  restacking.

2009-03-30  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  * Don't update the HDRM from add_window().  This made the Tasks
	    button hidden when a non-portrait mode application launched
	    in front of a portrait one.
	  * Fix task switche layout when going there from that state.

2009-03-30  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-comp-mgr.c: White space and over 80 char lines fixed.
	(hd_comp_mgr_unmap_notify): Handle the stackable leader as well.

2009-03-30  Jan Arne Petersen  <jpetersen@openismus.com>

	Implement Do not disturb flag.

	* src/mb/hd-atoms.c:
	* src/mb/hd-atoms.h (HD_ATOM_HILDON_DO_NOT_DISTURB,
	  HD_ATOM_HILDON_DO_NOT_DISTURB_OVERRIDE): Add new atoms for do not
	  disturb flags.

	* src/mb/hd-comp-mgr.c (stack_sync, do_not_disturb_flag,
	  portrait_requested, hd_comp_mgr_client_property_changed,
	  hd_comp_mgr_map_notify, hd_comp_mgr_restack,
	  hd_comp_mgr_should_be_portrait,
	  hd_comp_mgr_check_do_not_disturb_flag): Check for changes of do not
	  disturb flag on restacking and property change event. Check for do
	  not disturb on mapping of incoming event previews and information
	  banners.

	* tests/Makefile.am:
	* tests/test-do-not-disturb.c (added): Add do not disturb test window.

2009-03-27  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Coverity found issues:
	* src/mb/hd-decor.c (hd_decor_create_actors): Don't use 'client'
	before its NULL check.
	(hd_decor_create_actors): Remove dead code, check for title==NULL when
	it cannot be.
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify): Add check for
	possible NULL deref with priv->home==NULL.
	* src/mb/hd-theme.c (construct_buttons): Avoid NULL dereference.
	* src/mb/hd-wm.c (hd_wm_client_responding): Remove unused 'banner'.

	* src/home/hd-home.c (root_window_client_message): Plug a memory leak
	by using break instead of return in the switch.
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unmap_notify): Remove transiency
	from a stackable secondary before libmatchbox2 starts to unmap them.
	Also, fix the transiency of the window above if any. Fixes: NB#103836

2009-03-27  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-notification.c: deleted, never used
	* src/home/hd-notification.h: deleted
	* src/home/Makefile.am
	* data/qgn_home_close.png: deleted, tasw doesn't need it anymore
	* data/Makefile.am
	* TODO

2009-03-27  Gordon Williams <gordon.williams@collabora.co.uk>

        * tests/test-launcher.c (removed)
        * tests/Makefile.am: Removed launcher test (as ir wouldn't have worked
          in a long time anyway)

2009-03-27  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/launcher/hd-launcher-page.c
        * src/launcher/hd-launcher-grid.c
        * src/launcher/hd-launcher-grid.h
        * src/launcher/hd-launcher-tile.c
        * src/launcher/hd-launcher-tile.h: Added glow effect to task launcher 
          items. Refactored HdLauncherTile a bit to save code.
        * src/tidy/tidy-highlight.c: Added more samples for improved blur 
        * data/transitions.ini: Speeded up glow

2009-03-27  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#98202 Version conflict dialog is appeared in background while the
		 restoring is going on.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify):
	  Don't place confirmation notes in the front group,
	  because that group is in front of everything else,
	  and if the confirmation note has a transient it
	  would be behind the note.

2009-03-27  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* tests/test-portrait-win.c:
	  Numerous enhancementes.

2009-03-27  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Task Navigation Specification 2.0 update.

	NB#106694 Sometimes close button is not shown on the incoming event
		   notification.
	NB#101730 Title of thumbnails in switcher area is not clear.
	NB#98762  The "X" in switcher thumbnails should be themed properly

	* src/mb/hd-atoms.h
	* src/mb/hd-atoms.c:
	  Added atoms to communicate the incoming event notification's
	  time and message body (secondary text).
	* src/mb/hd-note.h
	* src/mb/hd-note.c:
	  Cache the property values.  Notifications to work will need
	  a newer hildon-home now.
	* src/home/hd-task-navigator.c:
	  Little 150KiB change.  Don't use /var/tmp/app-screenshots anymore
	  but X-Maemo-Switcher-Icon of .desktop files.
	* src/mb/hd-comp-mgr.c:
	  Now notification actors needn't be reparented because
	  the navigator doesn't use it anymore.
	* configure.ac:
	  Changed -std=c99 to -std=gnu99.
	* TODO: update
	* src/home/hd-switcher.c
	* src/home/hd-scrollable-group.c:
	  Cosmetic fixes.

2009-03-27  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.31

2009-03-27  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_setup_input_viewport): Trap X
	errors.

2009-03-27  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.30

2009-03-26  Gordon Williams <gordon.williams@collabora.co.uk>

        * data/transitions.ini: More speedups by Martin

2009-03-26  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/tidy/tidy-highlight.c (added)
        * src/tidy/tidy-highlight.h (Added)
        * src/tidy/Makefile.am: Added extra tidy class for blurring task
          launcher icons. Not used in task launcher yet.

2009-03-26  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/mb/hd-decor.c
        * src/home/hd-title-bar.c
        * src/home/hd-title-bar.h: Changing the margin between the title and
          the progress indicator to 8px        
        * data/transitions.ini: Martin's latest values, extra entries for
          task launcher glow that will appear soon          
        * src/mb/hd-comp-mgr.c
        * src/home/hd-home-view.c
        * src/tidy/tidy-blur-group.h
        * src/tidy/tidy-blur-group.c: Improvements to blurring code, and
          fixes to update what is blurred   
        * src/tidy/tidy-sub-texture.h 
        * src/tidy/tidy-sub-texture.c: Tidying some code up    

2009-03-26  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_client_get_app): Replace
	g_return_val_if_fail with an if.
	(hd_comp_mgr_client_property_changed): Enhance NULL checks in an
	attempt to fix one of the crashes in NB#108204.

	* src/mb/hd-theme.c (construct_buttons, back_button_press_handler):
	Reference back button for the press handler when installing the press
	handler, not when calling it (when it can be already destroyed). Fixes
	a crash with the current libmatchbox2.

	Revert reversion of Marc's patch, wasn't an issue after all.

2009-03-25  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.29

	Reverted Marc's patch for NB#106507 because it broke background
	killing.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_handle_stackable): When a stack
	leader is replaced and becomes a secondary, fix its transiency. Also
	re-theme both of the windows to get the titlebar buttons right.
	Requires libmatchbox2 != 0.2.22-1. Fixes: NB#103508

2009-03-25  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.28

2009-03-24  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	Event handlers now return void and cannot stop processing
	of further events.
	Accoding to Kimmo:
	Fixes NB#105014.
	
	* src/home/hd-home.c:
	* src/mb/hd-animation-actor.c:
	* src/mb/hd-note.c:
	* src/util/hd-util.c:

2009-03-24  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	105061 ROTATION: Incoming call dialog in home view is not
	       in portrait layout

	Support portrait mode in home view.  A bit.
	This is necessary to show dialogs in home view which request
	portrait mode.

	* src/home/hd-render-manager.h:
	  New state, HDRM_STATE_HOME_PORTRAIT, which is like HDRM_STATE_HOME.
	  Added STATE_IS_PORTRAIT() and STATE_IS_PORTRAIT_CAPABLE().
	* src/home/hd-render-manager.c:
	  Added hd_render_manager_set_state_portrait() and *_unportrait().
	  Handle HDRM_STATE_HOME_PORTRAIT.
	* src/mb/hd-comp-mgr.c:
	  Also switch between HOME and HOME_PORTRAIT.
	* src/home/hd-home.c
	* src/home/hd-home-view.c:
	  Rotate the backgrounds back if we're going to portrait mode.
	* src/util/hd-util.c:
	  Create a modal blocker large enough to be ok both in portrait
	  and landscape modest.

2009-03-23  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-render-manager.c (hd_render_manager_set_visibilities):
	  Don't add hidden actors to the list of blockers since it doesn't
	  block anything.  May fix some actual problems.

2009-03-23  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-theme.c (back_button_timeout): Add some NULL guards. The
	original code was strangely brave in this respect. Should fix
	NB#103447.

2009-03-23  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-dialog.c (hd_dialog_request_geometry):
	  FKB regression fix.  Ignore decorations when decorations are
	  to be ignored.  Don't reserve cancel area for fullscreen dialogs.
	  Bocsi.

2009-03-23  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.27

	* autogen.sh: Do not call configure, it's done later by cdbs.
	* debian/rules: Use DEB_CONFIGURE_EXTRA_FLAGS and CFLAGS to pass the
	options in the right way.
	* src/launcher/Makefile.am, src/home/Makefile.am,
	src/Makefile.am, src/util/Makefile.am, src/mb/Makefile.am,
	configure.ac: Link to libmatchbox2 statically when configure flag
	--enable-static-mb2=yes is given.

2009-03-23  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#106587 Drawing bug using widgets requesting size bigger than the
	          max size inside dialogs

	* src/mb/hd-dialog.c (hd_dialog_request_geometry):
	  Make sure the granted geometry doesn't exceed the screen height.

2009-03-20  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Misc improvements to prestarting sequence.
	Fixes: NB#106507

	* src/launcher/hd-app-mgr.c:

2009-03-20  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	  Little cleanup: name things by their proper name and rename
	  HdCompMgrClientPrivate::portrait_supported to portrait_not_supported.

2009-03-20  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/home/hd-title-bar.c: Ensured that the progress indicator is at
        the end of the title, and that it never overlaps the close button. 
        
2009-03-20  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#107155 ROTATION: Call handling with system lock dialog is not
	          shown in portrait mode

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_should_be_portrait):
	  Honor the current application's portrait request even
	  if it's not currently visible.

2009-03-20  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Track the windows (including dialogs) for each app so the HdCompMgr can
	tell HdAppMgr when an app has disappeared.
	Fixes: NB#106673

	* src/launcher/hd-app-mgr.c:
	* src/launcher/hd-app-mgr.h:
	* src/launcher/hd-launcher-item.c: Added a way to get the GQuark of the
	application id.
	* src/launcher/hd-launcher-item.h:
	* src/launcher/hd-launcher.c:
	* src/mb/hd-comp-mgr.c:

2009-03-20  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/home/hd-render-manager.c: Fix for NB#106678 - Home edit tab
        staying visible when changing states.

2009-03-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-title-bar.c (HD_TITLE_BAR_TEXT_MARGIN): Use 24px instead
	of 8px.

2009-03-19  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/home/hd-render-manager.c: Removed warnings generated by clutter
        if restack is called before an actor is parented

2009-03-19  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#103409 - Display is not on when information banner comes

	* configure.ac:
	* debian/control: Add mce-dev dependency

	* src/mb/hd-comp-mgr.c (property_changed_cb_id, mce_proxy,
	  hd_comp_mgr_init, hd_comp_mgr_map_notify): Request mce to switch
	  display on if there is an information banner displayed.

2009-03-19  Gordon Williams <gordon.williams@collabora.co.uk>

        * src/home/hd-clutter-cache.c
        * src/home/hd-clutter-cache.h: Added support for reloading textures in
        the cache
        * src/mb/hd-theme.c: Whenever a new theme is created, notify the 
        texture so it can reload all its' textures on theme change. This
        updates titlebars etc, which PARTIALLY solves NB#101874

2009-03-19  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#105921 Task switcher is not accessible after the missed call event
	          when call UI is opened

	* src/mb/hd-note.c:
	  Stack incoming event windows below the desktop,
	  so hd_comp_mgr_get_foreground_region() won't find it
	  and won't think it covers anything.

2009-03-19  Jan Arne Petersen  <jpetersen@openismus.com>

	Add support for _HILDON_APPLET_ON_CURRENT_DESKTOP property.

	* src/home/hd-home.c (hd_home_get_current_view,
	  hd_home_get_not_visible_views):
	* src/home/hd-home.h: Add function to get all not visible views.

	* src/mb/hd-atoms.c (hd_atoms_init):
	* src/mb/hd-atoms.h (HD_ATOM_HILDON_APPLET_ON_CURRENT_DESKTOP): Add
	new atom.

	* src/mb/hd-desktop.c (hd_desktop_stack): Add/Remove
	_HILDON_APPLET_ON_CURRENT_DESKTOP property to applets.

2009-03-18  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#104475

	* src/home/hd-home.c (hd_home_desktop_key_press):
	* src/home/hd-render-manager.h (STATE_NO_CALL_FROM_HOME): Do not allow
	call from Home for layout mode, switcher and launcher.

	* src/mb/Makefile.am: Remove trailing spaces.

2009-03-18  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Removed the icon theme hack, using a bit cleaner workaround.

	* configure.ac,
	  data/icons: Removed data/icons.
	* data/Makefile.am,
	  data/qgn_home_close.png: Moved PNG here from the icons directory.
	* src/home/hd-task-navigator.c (hd_task_navigator_init): Load
	qgn_home_close.png from /usr/share/hildon-desktop for now.

2009-03-18  Gordon Williams <gordon.williams@collabora.co.uk>

	Fixes for NB#101613 

	* src/home/hd-render-manager.c: Made sure blur_Front is not raised to
	the top of front - allowing notifications to be seen properly.
	* src/home/hd-render-manager.h
	* src/mb/hd-comp-mgr.c: moved hard-coded state to the top of HDRM like
	we have for other states

2009-03-18  Gordon Williams <gordon.williams@collabora.co.uk>

	* data/transitions.ini: Speeded up transitions even more

2009-03-18  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher-page.h: Commented enums
	* src/home/hd-home-view-container.c: Fix for NB#106484, allowing
	background image to move even when blurred
	* src/util/hd-transition.c: Modified close animation to shrink
	more vertically before it starts to shrink horizontally

2009-03-18  Alejandro Pinheiro <apinheiro@igalia.com>

	* debian/rules: set a11y suppport compilation as the default one
	* src/a11y/hildon-desktop-a11y.c: use the environment variable
	ENABLE_HILDON_DESKTOP_A11Y in order to check in runtime if it is
	needed to init the a11y support

2009-03-18  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Changed default application icon name to the correct spelling.
	Fixes: NB#106105.

	* src/launcher/hd-launcher.h:

2009-03-18  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.26

2009-03-17  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c
	* src/home/hd-render-manager.h: Fix for bugs NB#105855 and NB#106022,
	both related to what is blurred/visible in home edit mode.
	* src/mb/hd-comp-mgr.c: Fixed regression caused by misplaced assert

2009-03-17  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Use the lowmem signal to determine whether we can launch new
	applications.
	Fixes: NB#106339

	* src/launcher/hd-app-mgr.c:

2009-03-17  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-comp-mgr.c: Changes to unregister_client so that an
	unregistered HdApp no longer contains links to the followers it
	had previously.

2009-03-17  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view-container.c
	  (hd_home_view_container_constructed): Use g_mkdir_with_parents fix
	  warning.

	* src/home/hd-home.c (hd_home_desktop_key_press): Use Gdk to get
	pressed key. Fixes: NB#104578, NB#104534

2009-03-17  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher.h
	* src/launcher/hd-launcher.c
	* src/launcher/hd-app-mgr.c: Code to start an app launch transition
	whenever hildon-desktop is asked to launch an application
	* src/home/hd-render-manager.c: Switched to using object_get_data to
	find clients from actors as it is faster than a search
	* src/home/hd-switcher.c: Added extra checks for valid clients to
	help fix NB#105933 - although this stops the crash it doesn't fix the
	real issue yet
	* src/mb/hd-comp-mgr.c: Added a check for the client, removed some
	debug statements that were spamming the console

2009-03-17  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.25

2009-03-16  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Added X-Maemo-Switcher-Icon property to HdAppLauncher, read from the
	.desktop file.

	* src/launcher/hd-launcher-app.c:
	* src/launcher/hd-launcher-app.h:

2009-03-16  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/mb/hd-status-menu.c (hd_status_menu_init): Move resize/center to
	hildon-status-menu.

2009-03-13  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unregister_client):
	  Regression fix: closing a window stack in tasw segfaulted
	  because unregister_client() forgot to remove the secondary's
	  actor from the switcher.

2009-03-13  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	When not enough memory is available for launching an app, show a
	notification and allow the user to close other apps.

	* src/home/hd-switcher.c:
	* src/launcher/hd-app-mgr.c:
	* src/launcher/hd-launcher.c:

2009-03-13  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/util/hd-transition.c (hd_transition_subview):
	  Regression workaround: after the transition to the subview
	  the main view wouldn't update anymore.

2009-03-13  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unregister_client):
	  Fix sigsegv that happened on the device after closing web browser
	opened from RSS reader

2009-03-13  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#105295 Giving a Missed call in portrait mode changes
	          the orientation to landscape

	Actually not changes but crashed hd.

	* src/home/hd-render-manager.c (hd_render_manager_is_client_visible):
	  Tolerate actors of clients in the window stack which are not
	  child of the_render_manager.  This may occurr when the client
	  is in the stack but was not mapped on wm-side.
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify):
	  Fix misleading comment.

	Don't tell me it's 13rd Friday again!

2009-03-12  Gordon Williams <gordon.williams@collabora.co.uk>

	Fix for app relaunch transition.

	* src/launcher/hd-app-mgr.h
	* src/launcher/hd-app-mgr.c: Split hd_app_mgr_relaunch out into
	  hd_app_mgr_relaunch_set_top 
	* src/home/hd-render-manager.h: tidying up
	* src/home/hd-render-manager.c: added transition-complete signal
	* src/home/hd-task-navigator.c: add zoom-in-complete signal
	* src/home/hd-switcher.c: Now sequence app relaunch event to go to
	  launcher, then zoom in, then send app_top message

2009-03-12  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Ensure apps go to inactive state when main window gets closed.
	Fixes: NB#105003.

	* src/mb/hd-comp-mgr.c:

2009-03-12  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Background killing.
	Fixes: NB#100159

	* src/home/hd-home.c: Replaced call to hd_comp_mgr_app_from_xwindow to
	hd_comp_mgr_client_get_app.
	* src/home/hd-switcher.c: Remove the previous actor when a new one is
	waking up.
	* src/launcher/hd-app-mgr.c: Many changes for app hibernation.
	* src/launcher/hd-app-mgr.h:
	* src/launcher/hd-launcher-app.h: Removed hd_comp_mgr_app_from_xwindow.
	* src/launcher/hd-launcher.c: Used the new unified hd_app_mgr_launch
	instead of hd_app_mgr_relaunch.
	* src/mb/hd-comp-mgr.c: Many, many hacks to make hibernation work.
	* src/mb/hd-comp-mgr.h:

2009-03-12  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/util/hd-transition.c: Replaced call to canberra (for sound)
	with a warning (for speed). Will be removed when 105635 is fixed.
	* data/transitions.ini: Made transitions really fast to increase
	apparent speed of device.

2009-03-12  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.24

2009-03-12  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/util/hd-transition.c
	* data/white-particle.png: New 'twinkling' close transitions, and
	using clutter-cache for the particle texture. Added cache flag for
	canberra, and added debug print if the call takes >100ms	

2009-03-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (hd_home_view_add_applet): Restack windows.
	Fixes: NB#104480.

	* debian/changelog: Update

2009-03-12   Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Revert Thomas' patch, we need to make it so that _NET_WM_NAME is free
	from markup and markup will be in new window property:

	Escape titles before we display them so that you can
	use <, >, and & within them.  For some reason, turning
	off markup in titles doesn't do this, so we have to
	escape them explicitly.

	* src/home/hd-title-bar.c:
	* src/mb/hd-decor.c:

2009-03-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-render-manager.c
	  (hd_render_manager_place_titlebar_elements): Call
	  hd_title_bar_update. Fixes: NB#105256

	* debian/changelog: Update

2009-03-12  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-home.c: Removed some debug printing
	* src/mb/hd-app.h
	* src/mb/hd-comp-mgr.c: Now don't perform a subview transition if
	  mapping without an unmap (eg. fullscreen->window case for image
	  viewer)

2009-03-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/util/hd-transition.c (hd_transition_close_app,
	  on_close_timeline_new_frame, hd_transition_completed)

	  Prepare the close-app transition for portrait<->landscape
	  mode switching, which might be triggered by the application
	  closing.  Failing to do this the effect goes wrong.
	  Also closed a memory leak.

2009-03-11  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	Escape titles before we display them so that you can
	use <, >, and & within them.  For some reason, turning
	off markup in titles doesn't do this, so we have to
	escape them explicitly.

	Fixes: #NB105404

	* src/home/hd-title-bar.c:
	* src/mb/hd-decor.c:

2009-03-11  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/util/hd-transition.c: Re-enabled proper sliding
	subview transition

2009-03-11  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Implemented don't support portrait mode.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_should_be_portrait):
	  Effectively all clients are assumed to support portrait mode
	  unless they claim otherwise.
	* src/mb/hd-note.h
	* src/mb/hd-note.c:
	  Resize the note when the screen geometry changes.
	  Necessary if we switch back to landscape because of a note
	  because notes are sized to fill the screen horizontally.
	  Dialogs don't have this problem.
	* tests/test-portrait-win.c

2009-03-11  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#105071 - Do not show notification previews in portrait mode.

	* src/home/hd-render-manager.h (STATE_DISCARD_PREVIEW_NOTE): Do not
	show notification previews in portrait mode.

2009-03-11  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Regression fix: application window disappeared after coming from
	switcher view and opening the menu.

	* src/home/hd-render-manager.c (hd_render_manager_return_app):
	  Don't let HdHome cover applications.

2009-03-11  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#105036 Menu Items are not displayed in Call handling view

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_should_be_portrait):
	  Ignore menus, which are not transient.  What a mess.

2009-03-10  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/util/hd-transition.c: added check for null dereference
	that just crashed my device.

2009-03-10  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	Fixes NB#91048.
	
	* src/home/hd-home.c: When we get a request to show or hide the
	progress indicator, use the window ID given in the request, and
	don't attempt to guess which window, because we'll get it wrong.

2009-03-10  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-render-manager.c (hd_render_manager_set_blur):
	  Don't call the complete() function if the effect is already playing
	  because that indirectly calls hd_comp_mgr_restack() and whatsnot
	  with the end result that set_blur() may recurse.

	  This fixes a problem with windows requesting portrait mode
	  as soon as mapped: everything changes well, hdrm goes to the
	  appropriate state but HdTitleBar's state becomes inconsistent
	  and shows the top-left button again.

2009-03-10  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/tidy-blur-group.c: made shading pattern be loaded from an
	  array
	* src/launcher/hd-launcher-grid.c: modify launcher animation to 
	  fade diagonally

2009-03-10  Gordon Williams <gordon.williams@collabora.co.uk>

	Fixes for NB#104037 and NB#96780, and black desktop + non-blurring
	applet regression from a few days ago.
	
	* src/home/hd-render-manager.c: Added more #defined debug info
	* src/mb/hd-comp-mgr.c: Removed un-needed restacks
	* src/home/hd-task-navigator.c: Removed foreach that didn't work
	 (You can't modify what you iterate over in clutter)
	* src/tidy/tidy-blur-group.c: Added more dimming for vignette effect

2009-03-10  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Make the app_killer interface usable again.

	* src/launcher/hd-app-mgr.c (hd_app_mgr_dbus_name_owner_changed):
	  Listen for new registrations too.
	  Request for the PID of the launched application's service
	  when we see its NameOwnerChanged.  Getting it right after
	  launch fails because the service is not registered at that time.
	* src/mb/hd-comp-mgr.h
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_kill_all_apps):
	  Renamed from hd_comp_mgr_hibernate_all().
	  Reverts change from r35805 and use HdAppMgr again
	  to enumerate running applications.
	  Fixes a crash when hd_comp_mgr_hibernate_client() tried to
	  hibernate the desktop client, which doesn't have a ClutterClient.
	* src/util/hd-dbus.c:
	  Update.

2009-03-10  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.23

2009-03-10  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hildon-desktop-views.schemas: By default views 1, 2, 3 are
	displayed. Fixes: NB#93980
	* debian/changelog: Update.

2009-03-09  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	Fixes: NB#103602

	* src/mb/hd-dialog.c: when a dialogue opens, remove all
	open menus.

2009-03-07  Thomas Thurman  <thomas.thurman@collabora.co.uk>

        Fixes: NB#100141
	
	* src/mb/hd-comp-mgr.c: app->leader->followers can be null,
	so check before we dereference it.

2009-03-05  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/home/hd-switcher.c: remove debug statements accidentally checked
	in in previous commit.

2009-03-05  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	Fixes: NB#96780
	and its duplicates NB#104206 and NB#104320.
	Does not yet fix NB#104037 which appears not to be identical.
	
	* src/home/hd-render-manager.c: unconditionally raise apps
	in the order the WM believes they're in, when switching to them.

2009-03-05  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Stop trying to prestart apps if they fail.
	Fixes: NB#99791

	* src/launcher/hd-app-mgr.c:

2009-03-05  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Added prestarting priorities.
	Fixes: NB#100675

	* src/launcher/hd-app-mgr.c: Prestart apps in priority order, kill them
	in inverse sequence.
	* src/launcher/hd-launcher-app.c: Added new priority variable, read from
	the .desktop file.
	* src/launcher/hd-launcher-app.h:

2009-03-03  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c
	* src/home/hd-render-manager.h:
	Added hd_render_manager_blurred_changed convenience function
	* src/home/hd-home-view.c:
	Now call update_blur when the background image changes
	* src/tidy/tidy-blur-group.c:
	Added fallback for when pixel shader can't be used - like scratchbox
        (uses multiple renders)
	* src/mb/hd-comp-mgr.c:
	Added comment to explain commenting of blur update code

2009-03-03  Gordon Williams <gordon.williams@collabora.co.uk>

	Clutter 0.8.2-0maemo20 reccomended (or transitions stutter)
	* src/home/hd-render-manager.c:
	  Removed blur box for task navigator, instead just adjust opacity.	  
	  Fixed restacking bug
	  Fixed bug causing transitions to be constantly running in some cases
	* src/tidy/tidy-blur-group.c:
	  Re-engineered blur to do a progressive blur for blurring in, and
	  a simple fade for blurring out.
	* src/mb/hd-comp-mgr.c:
	  Removed the unmap_effect variable as it turns out not to be needed
	  No longer return windows for stacking as we do it in HDRM now
	  (this allows us to only update the screen when absolutely required)
	* data/transitions.ini
	* src/util/hd-transition.c:
	  Added 'duration' settings for more types of transition. Removed
	  settings for task navigator blur box

2009-03-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view-container.c (backgrounds_dir_changed): Change
	suffix to .pvr.

2009-03-02  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/tidy/tidy-blur-group.c (tidy_blur_group_paint):
	  Fallback to something sensible if we don't have FBO.

2009-03-02  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* tests/Makefile.am:
	  Build test-portrait-dlg from the right source.
	* tests/test-portrait-win.c:
	  Header cleanup.

2009-03-02  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/tidy-blur-group.c:
	  Optimised blur pixel shader a little, and added more samples
	  for a more smooth blur effect
	* src/mb/hd-theme.c
	* src/mb/hd-theme.h:
	  HdTheme now only extended from MBWMTheme, not MBWMThemePng
	  (this should reduce X Pixmap usage)
	* src/home/hd-home-view.c:
	  Now use .pvr home view backgrounds. Added code to clip oversize
	  backgrounds to the correct size.

2009-03-02  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.22

2009-02-27  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/home/hd-home.c: improve the warnings when apps
	  don't get screenshots taken.

2009-02-27  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/home/hd-home.c: add ability to create and delete
	  screenshots when _HILDON_LOADING_SCREENSHOT is received.
	* src/launcher/hd-launcher.c: when restoring saved images,
	  look for PNGs, not JPEGs.
	* src/mb/hd-atoms.c: declare _HILDON_LOADING_SCREENSHOT atom.
	* src/mb/hd-atoms.h: declare _HILDON_LOADING_SCREENSHOT atom.
	* configure.ac: add gdk-pixbuf-xlib library which we
	  need for screenshots.
	* src/main.c: initialise gdk-pixbuf-xlib library.
	* src/launcher/hd-launcher-app.h: declare
	  hd_comp_mgr_app_from_xwindow().
	* src/mb/hd-comp-mgr.c: remove external declaration of 
          hd_comp_mgr_app_from_xwindow().
	
2009-02-27  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (hd_home_view_load_applet_position,
	  hd_home_view_add_applet, hd_home_view_move_applet):
	* src/home/hd-home-view.h:
	* src/home/hd-home.c (hd_home_add_applet): Fix move of default
	  applets.

	* src/home/hd-title-bar.c (BTN_LABELS): Fix string.

2009-02-27  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#103417 Animation actors cannot be resized
	Patch from Artem Egorkine.

	* src/mb/hd-animation-actor.c:
	  Allow geometry changes to HdAnimationActors as long as they
	  remain off-screen.

2009-02-27  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* data/: Remove unused graphics.

2009-02-26  Alejandro Pinheiro <apinheiro@igalia.com>

	* src/a11y/tail: new directory, to add the implementation of the a11y
	support for src/tidy
	* src/a11y/tail/tail.[ch]: new
	* src/a11y/tail/tail-sub-texture.[ch]
	Added a11y implementation for TidySubTexture

2009-02-26  Alejandro Pinheiro <apinheiro@igalia.com>

	* tests/Makefile.am
	Added -D_XOPEN_SOURCE compiling test portrait (win and dlg), to avoid
	problems including hildon-remote-texture.h

2009-02-26  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.h
	* src/home/hd-task-navigator.c:
	  Little cleanups.

2009-02-26  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Portrait mode changes.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_should_be_portrait):
	  Let the REQUEST flag be inherited too.
	  This is significant when the requesting window is not visible,
	  eg. when there is a stackable window above.
	* src/home/hd-title-bar.c (hd_title_bar_init):
	  Regression fix: the right-aligned buttons weren't visible after
	  switching to portrait mode.  Fixed by repositioning them after
	  screen size change.
	  Plus little cleanups (made global variables static).
	* tests/Makefile.am
	* tests/test-portrait-win.c:
	  Enhanced.

2009-02-26  Jan Arne Petersen  <jpetersen@openismus.com>

	Implement new edit mode title bar.

	* src/home/hd-render-manager.c (hd_render_manager_set_input_viewport,
	  hd_render_manager_sync_clutter_before): Remove HDRM_BUTTON_MENU
	  handling.
	* src/home/hd-render-manager.h (STATE_IS_EDIT_MODE): Add
	  STATE_IS_EDIT_MODE macro.

	* src/home/hd-switcher.c (hd_switcher_clicked, hd_switcher_press):
	  Remove menu button. Use switcher_press to show edit menu in edit
	  mode.

	* src/home/hd-title-bar.c (hd_title_bar_init): Add supoort for buttons
	  with text.
	  (hd_title_bar_set_state): Add handling for BTN_MENU and BTN_DONE.
	  (hd_title_bar_set_full_width): Use relative positions for left and
	  right separtor in edit mode.
	  (hd_title_bar_set_for_edit_mode, hd_title_bar_update): Show edit
	  title bar in edit mode.
	  (hd_title_bar_top_left_press): Do not show pressed state in edit
	  mode.
	  (hd_title_bar_top_right_press): Go back to home mode if in edit
	  mode.

	* src/home/hd-title-bar.h: Add HDTB_VIS_BTN_DONE.

2009-02-25  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (close_applet, close_button_clicked,
	  hd_home_view_close_all_applets): Move close applet function here.
	  (hd_home_view_unregister_applet): Reset layout.

	* src/home/hd-home.c:
	* src/home/hd-home.h: Move close applet function to HdHomeView.

2009-02-25  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c: Fixed blurring of FKB (and full-screen
	dialogs) again. NB#103395
	* src/mb/hd-comp-mgr.c: Call update_blur on unregister, as we don't
	get an unmap event for the FKB.
	  
2009-02-25  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c:
	* src/home/hd-home-view.h:
	* src/home/hd-home.c:
	* src/home/hd-home.h:
	* src/home/hd-render-manager.h: Implement more changes in Home UI
	spec.

2009-02-24  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c:
	* src/home/hd-home.c:
	* src/home/hd-home.h: Implement some changes in Home UI spec.

2009-02-24  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-decor.c
	* src/home/hd-title-bar.c:
	NB#90445 - long window titles should be clipped to the screen. Removed
	non-centred code paths from hd-decor as they were never executed.

2009-02-24  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view-layout.c (added):
	* src/home/hd-home-view-layout.h (added):
	* src/home/Makefile.am: Add HdHomeViewLayout class which supports
	arranging applets according to the Home UI spec.

	* src/home/hd-home-view.c: Use new HdHomeViewLayout to arrange
	applets. Fixes: NB#101724

	* src/home/hd-home.c (hd_home_add_applet): Move applet positioning to
	HdHomeView.
	  (hd_home_show_applet_buttons): Hide settings icon. Fixes: NB#102994

	* src/mb/Makefile.am:
	* src/mb/hd-comp-mgr.c:
	* src/mb/hd-comp-mgr.h:
	* src/mb/hd-home-applet.c:
	* src/mb/hd-home-applet.h:
	* src/mb/hd-applet-layout-manager.c (deleted):
	* src/mb/hd-applet-layout-manager.h (deleted): Remove old, non
	working, applet arranging code.

2009-02-23  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/tidy-blur-group.c: Added workaround for GLSL shader
	compilation when the language includes ',' as a decimal separator

2009-02-23  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher.c: removed loading of blank image 
	(which is now not in the h-d package) - if there is no image a 
	rect of the theme's background colour is created.

2009-02-23  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/launcher/hd-launcher.c: basic support for snapshot images
	on loading.  No support for saving them yet.

2009-02-23  Gordon Williams <gordon.williams@collabora.co.uk>

	Themed app launch animation
	* data/blank-window.png (deleted)
	* data/launcher-button-highlight.png (deleted)
	* data/edit-button.png (deleted)
	* data/Makefile.am: removed images that are no longer used
	* src/launcher/hd-launcher.c: Now use app screenshot or gtk theme's
	  background colour for launch transition, and use title bar image
	* home/hd-home.c: Remove reference to edit-button.png in #define

2009-02-23  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-task-navigator.c: Modified task navigator tourette's
	* src/home/hd-title-bar.c
	* src/mb/hd-theme.h:
	Used correct shape 'pressed' button NB#102652
	* src/tidy/tidy-blur-group.c:
	Modified vignette effect to Martin's spec
	* src/tidy/tidy-mem-texture.c:
	Removed exact row length in preparation for new SGX (Clutter will make
	sure it still works)
	* data/Makefile.am
	* data/transitions.ini:
	Added file to describe length of transitions
	* src/util/hd-transition.c
	* src/util/hd-transition.h:
	Added functions to read settings from transitions.ini
	* src/launcher/hd-launcher-page.c
	* src/launcher/hd-launcher-grid.c:
	Use hd-transition code to set animation lengths, tweaked animations to
	Martin's spec
	* src/home/hd-render-manager.c:
	Tidying animation code, loading animation details from transitions.ini

2009-02-23  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Remove connection from HdLauncherApp to HdCompMgrClient.
	Fixes: NB#102086

	* src/home/hd-switcher.c: Changed handling of relaunching to use the new
	function.
	* src/home/hd-task-navigator.c: Added function to look for the appropiate
	actor for an app.
	* src/home/hd-task-navigator.h:
	* src/launcher/hd-app-mgr.c:
	* src/launcher/hd-launcher-app.c: Removed methods for getting and setting
	the main_comp_mgr_client.
	* src/launcher/hd-launcher-app.h:
	* src/mb/hd-comp-mgr.c: Set a property on each window actor with the app
	id.

2009-02-23  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.21

2009-02-21  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view-container.c
	  (hd_home_view_container_update_active_views): Fix selection of new
	  current view. Fixes: NB#102458
	  (hd_home_view_container_constructed): Start to monitor
	  ~/.backgrounds in constructed.
	* debian/changelog: Update.

2009-02-20  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	Being intransient is now a sufficient condition to be considered
	system-modal.  A dialog's modality is not relevant to its
	system-modality.  After discussion with Kimmo.  
	Fixes: NB#97489.
	
	* src/util/hd-util.c: Change prerequisites for being system-modal.

2009-02-20  Jan Arne Petersen  <jpetersen@openismus.com>

	Move background image caching to hildon-home. hildon-desktop just
	loads the existing files.

	* src/home/hd-home-view-container.c
	  (hd_home_view_container_update_active_views): Monitor ~/.backgrounds.
	  (hd_home_view_container_dispose): Remove ~/.backgrounds monitor.
	* src/home/hd-home-view.c (
	  load_background_source, hd_home_view_allocate,
	  hd_home_view_constructed, hd_home_view_dispose,
	  hd_home_view_finalize, load_background_idle,
	  hd_home_view_load_background):
	* src/home/hd-home-view.h: Just load the cached background.
	* debian/changelog: Update.

2009-02-20  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Fulfilling Lassi's requests wrt portrait mode.

	* src/util/hd-util.c (hd_util_change_screen_orientation):
	  Rotate_90 instead of Rotate_270.
	* src/mb/hd-comp-mgr.c:
	  hd_comp_mgr_client_property_changed():
	    If the client's REQUEST property changes from 0->1 but SUPPORTS stays 0
	    assume it.
	  hd_comp_mgr_should_be_portrait():
	    When deciding whether a client SUPPORTs portrait layout consider its
	    ancestors in the transiency hierarchy as well.

2009-02-19  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/home/hd-render-manager.c (hd_render_manager_init): Remove unused
	member 'in_notify' from the priv struct.
	(hd_render_manager_set_input_viewport): Block Status Area input when
	we have the dialog blur (does not work for two levels of dialogs,
	though).

2009-02-19  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Remove check for being in a transition from HdSwitcher.
	Fixes: NB#102568

	* src/home/hd-switcher.c:

2009-02-19  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/home/hd-title-bar.c (hd_title_bar_set_window): If the client is
	NULL, remove the back and close button as well. Fixes: NB#102000
	* src/mb/hd-theme.c (hd_theme_create_decor): Return immediately if the
	client is undecorated.
	* src/mb/hd-dialog.c (hd_dialog_request_geometry): Leave at least
	title bar's worth of space on top of the dialog.

2009-02-19  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Avoid re-entering hd_render_manager_set_state if we came from there, the
	results are unspecified.

	* src/mb/hd-wm.c:

2009-02-19  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c (hd_task_navigator_add_dialog):
	  Don't abort on error but emulate g_return_if_fail in five lines of code.

2009-02-19  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Coverity warning fixes.

	* src/home/hd-clutter-cache.c (hd_clutter_cache_get_real_texture):
	Plug leaked filename_alloc in two error cases.
	* src/home/hd-render-manager.c (hd_render_manager_sync_clutter_befo):
	Fix coverity warning with HDRM_STATE_UNDEFINED.
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unregister_client): Fix coverity
	warning (app->leader is always non-NULL when app->stack_index >= 0
	holds).

2009-02-19  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c (hd_render_manager_update_blur_state):
	  Add HdWmClientTypeAppMenu to list of client types that cause blur
	  (for clock's popup window)	

2009-02-19  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Added misc debug output of prestarting process.

	* src/launcher/hd-app-mgr.c:

2009-02-19  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Removed checking for init_done signal before prestarting apps, as h-d
	wasn't getting it in time.

	* src/launcher/hd-app-mgr.c:

2009-02-19  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#89949 -- removing another cool easter egg.
	Activate (focus) the desktop client when going to switcher/launcher
	views. This will naturally unfocus the current application.

	In addition this will enable home-call and home-contacts.

	* src/home/hd-render-manager.h:
	  Add STATE_TASK_NAV and STATE_LANUNCHER as NEED_DESKTOP.
	* src/home/hd-home.c:
	  Add the Input WM hint to the desktop client window to make it
	  focusable.
	* src/home/hd-render-manager.c (hd_render_manager_set_state):
	  Tiny cleanup.

2009-02-18  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/home/hd-render-manager.c: In addition to my previous checkin,
	the menu button should still work when the screen is blurred
	(since that's the only time it ever appears!)

2009-02-18  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Applet stacking fixes.  Remedies the "applet is not activated when
	clicked" and "invisible applet is activated when clicking on an empty
	desktop" (aka. rodarvus-symptom) problems. Fixes: NB#101434

	* src/mb/hd-desktop.c (hd_desktop_stack):
	  Don't look at who is transient to the desktop but ask the active
	  home view for the list of applets.
	* src/mb/hd-home-applet.c:
	  Don't attempt to make applets transient to the desktop.
	* src/home/hd-home.c
	* src/home/hd-home.h
	* src/home/hd-home-view.h
	* src/home/hd-home-view.c:
	  Utility functions added.
	* src/home/hd-home-view-container.c:
	  Force restacking when the desktop-changing transition is complete.
	  This is because merely making the stacking dirty may not take
	  effect until the next X event.

2009-02-18  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-app.c (hd_app_init): Re-enable patch from Laszlo to set
	transiency of stackable windows. Fixes: NB#97313
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify): Add missing
	hd_render_manager_stop_transition calls when adding new actor to the
	task navigator.

2009-02-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (hd_home_view_add_applet): Set the view to
	the applet data.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unregister_client): Get the view
	from the applet data instead of iterating the hierarchy. Fix crash.

2009-02-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (hd_home_create_edit_button, hd_home_constructed,
	  hd_home_show_edit_button): 
	* src/mb/hd-theme.h: Replace the edit button with a themed version
	  without any text. Fixes: NB#90289, NB#101918

	* debian/changelog: Update.

2009-02-18  Alejandro Pinheiro <apinheiro@igalia.com>

	* src/a11y/launcher/hda-launcher-grid.c: simplified after CAIL changes
	
2009-02-18  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/home/hd-render-manager.c: Don't add HD buttons to the input
        list if they're not reactive.  In other words, clicking an HD
        button while a system modal dialogue is up will close the dialogue.
        MB#100934.
	
2009-02-18  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Implement full stackable window handling.

	* src/util/hd-transition.c (hd_transition_close_app): Check that the
	secondary window is not a temporary leader.
	* src/mb/hd-theme.c (construct_buttons): Handle the case that the
	window is a secondary acting as leader.
	* src/mb/hd-app.c (hd_app_destroy): Remove content from this function.
	It is now done at the unmapping handler.
	(hd_app_init): Move stackable-related code to MapNotify handler
	because mapping time is what counts, not creation.
	* (hd_app_close_followers): Remove g_return_val_if_fail checks and
	replace the while loop with a for loop.
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unregister_client): Code to handle
	tricky cases, like unmapping of windows from middle of the stackable
	window stack. Make sure task navigator has the right actor in all
	cases.
	(hd_comp_mgr_handle_stackable): New function, containing code from
	hd_app_init and some more to aid in the task of keeping the actor in
	task navigator up-to-date.
	(hd_comp_mgr_map_notify): Changes to keep task navigator up-to-date
	with the stackable window stack.
	(hd_comp_mgr_effect): Handle the case of secondary window acting as
	the leader.
	(hd_comp_mgr_close_app): Send delete event to the window only if it is
	the leader, otherwise hd_app_close_followers already sent it.

2009-02-18  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Regression fix.

	* src/mb/hd-wm.c (hd_wm_client_activate):
	  Don't leave the current state if the activated client is not a HdApp.
	  This is because in switcher view programs are free to create dialogs
	  etc. and we don't want to leave the view in this case.

2009-02-18  Alejandro Pinheiro <apinheiro@igalia.com>

	* src/a11y/launcher/hda-launcher-grid.c
	* src/a11y/launcher/hda-launcher-page.c
	* src/a11y/launcher/hda-launcher-tile.c
	Changes required after some CAIL API changes

	* src/a11y/Makefile.am
	* src/a11y/hildon-desktop-a11y.c
	* configure.ac
	* src/a11y/home: new directory
	* src/a11y/home/hda-home.[ch]: new files
	* src/a11y/home/hda-home-init.[ch]: new files
	Added a11y support for HdHome object (HdaHome)

2009-02-18  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Asynchronous application prestarting.

	* src/launcher/hd-app-mgr.c: Changed prestarting code to use async dbus calls.
	Also, small misc fixes.
	* src/launcher/hd-launcher.c: Do not consider prestarted apps as launched.

2009-02-18  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Regression fix, debugging features.

	* src/mb/hd-comp-mgr.c:
	  hd_comp_mgr_setup_input_viewport():
	    Only consider subtracting the territory of foreground windows
	    in application and home views.  Doing so in tasw view opens
	    up the possibility of interaction with the thumbnail contents
	    with the pointer, which is fun but incorrect.
	  hd_comp_mgr_dump_debug_info():
	    Dump client window geometries.
	    Dump the input shape.

2009-02-18  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Task navigator cleanups.

	* src/home/hd-render-manager.h
	* src/home/hd-render-manager.c:
	  added hd_render_manager_return_app()
	  added hd_render_manager_return_dialog()
	* src/home/hd-task-navigator.h
	* src/home/hd-task-navigator.c:
	  drop the application window's actor and its dialogs in a container
	  to make it easier to hide them all at once

2009-02-18  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-wm.c: Applied Laszlo Pere's patch for bug #95018 (switch
	  to app mode when application is activated). Also fixes #99100

2009-02-17  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-comp-mgr.c:
	  Now remove any notifications and dialogs that are in front of the
	  desktop from the input mask area for the buttons. NB#101613

2009-02-17  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-comp-mgr.c:
	  Moved initialisation of hd-app-manager to allow it to add a signal
	  to hd-render-manager
	* src/home/hd-render-manager.c:
	  Modified calls to avoid clutter warnings when actors had/didn't have
	  parents

2009-02-17  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-render-manager.h (STATE_DISCARD_PREVIEW_NOTE):
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_register_client,
	  hd_comp_mgr_map_notify): Discard previews if there is an fullscreen
	  application is shown. Fixes: NB#97230
	
	* debian/changelog: Update.

2009-02-17  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-task-navigator.c: Modified g_return_if_fail check
	to normal 'if' and comment (return_if_fail does nothing now)

2009-02-17  Gordon Williams <gordon.williams@collabora.co.uk>

	* hd-comp-mgr.c: Added check in restack to detect apps above the
	desktop and switch to app mode.

2009-02-17  Alejandro Pinheiro <apinheiro@igalia.com>

	* configure.ac
	* debian/rules
	* src/main.c
	* src/ally: new directory

	Added a11y support for hildon-desktop. The a11y support is not compiled
	by default. You need to pass --enable-a11y to the configure, ie:
	  * ./autogen.sh --enable-a11y
	  * Add a11y to the DEB_BUILD_OPTIONS when using dpkg-buildpackage

	Fixes NB#93169

2009-02-16  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Added D-Bus interface to remotely launch applications.
	For NB#100519

	* src/home/hd-switcher.c: Receive relaunched signal from HdAppMgr.
	* src/launcher/Makefile.am:
	* src/launcher/hd-app-mgr-dbus.xml: Inteface definition for HdAppMgr.
	* src/launcher/hd-app-mgr.c:
	* src/launcher/hd-app-mgr.h:
	* src/launcher/hd-launcher-tree.c: Added method to find an item by id.
	* src/launcher/hd-launcher-tree.h:
	* src/mb/hd-comp-mgr.c: Create the HdAppMgr before HdSwitcher.

2009-02-16  Gordon Williams <gordon.williams@collabora.co.uk>
	
	NB#99127 - Home Edit Background not blurred
	* src/launcher/hd-launcher.h
	* src/launcher/hd-launcher-page.c
	* src/launcher/hd-launcher.c:
	Remove back arrow and use HdTitleBar's back button instead	  
	* src/home/hd-title-bar.c:	
	button highlighting for right-hand buttons
	* src/home/hd-render-manager.c
	* src/home/hd-render-manager.h:
	Use HdTitleBar back button instead of launcher/edit back buttons,
	and ignore back button for input viewport if in app mode.	
	* src/home/hd-home.h
	* src/home/hd-home.c
	* src/home/hd-home-view.c
	* src/home/hd-home-view.h:
	Remove back arrow and use HdTitleBar's back button instead.
	Add applets_container to new 'front' group, which can be pulled
	in front of home blurring for edit mode.

2009-02-16  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Regression fixes.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unregister_client):
	  Restored workaround to make HDRM reactive again when the latest
	  known system-modal dialog is gone,
	* src/home/hd-render-manager.c (hd_render_manager_update_blur_state):
	  Blur/unblur home when a confirmation note is mapped/unmapped.

2009-02-16  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-render-manager.h (STATE_SHOW_OPERATOR): Do not show the
	operator applet in edit mode. Fixes: NB#100746

	* debian/changelog: Update.

2009-02-16  Gordon Williams <gordon.williams@collabora.co.uk>

	*  src/home/hd-clutter-cache.c:
	Support for XY texture expansion

2009-02-13  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-dialog.c (hd_dialog_init): Support undecorated dialogs by
	not adding decor geometry to their size. Fixes: NB#101816

2009-02-13  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c
	* src/home/hd-render-manager.h:
	Added hd_render_manager_update_blur_state, which intelligently checks
	if a view should be blurred or not. NB#100590
	* src/mb/hd-comp-mgr.c
	* src/mb/hd-comp-mgr.h:
	Changes to use hd_render_manager_update_blur_state
	Changes to stop HD_COMP_MGR_CLIENT_IS_MAXIMIZED accidentally classing
	the 'crash' dialog as a fullscreen client and blurring it

2009-02-13  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#100551

	* src/mb/hd-note.h:
	  Added macros for all note types.
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify):
	  Test for specific client types (sysmodal dialog, info note,
	  confirmation) rather than "all except ..." when deciding
	  whether to leave for home from tasw/talu.  The previous test
	  cause us to change state when a new banner was mapped.
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_effect):
	  Blur/unblur when a comfirmation/info note is mapped/unmapped.

2009-02-13  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.20

2009-02-13  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Set correct xsession script number to 05 as NB#101224 says.

	* debian/rules:

2009-02-13  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-home.c:
	  Fixed broken notify for progress indicator - didn't mark the decor
	  as dirty so it never got redrawn.
	* src/mb/hd-decor-button.c:
	  Removed previous press/release notifies, as now works fine when called
	  from hd-theme
	* src/home/hd-title-bar.c
	* src/home/hd-title-bar.h
	* src/mb/hd-theme.c
	* src/mb/hd-decor.c
	* src/mb/hd-decor.h:
	  Added button paint handler, and make sure buttons and title bars are
	  synced when repainted. Also added call to hd-title-bar from hd-decor
	  to update it if the relevant decor is synced.

2009-02-13  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#100952
	Don't go to switcher view if a closed application wasn't
	the topmost one.

	* src/home/hd-render-manager.c
	* src/home/hd-switcher.c
	* src/mb/hd-wm.c
	* src/mb/hd-wm.h
	* src/mb/hd-comp-mgr.c

2009-02-12  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Added an xsession script for hildon-desktop. NB#101224

	* debian/control:
	* debian/hildon-desktop.xsession:
	* debian/rules:

2009-02-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  Reworked a bit to blink the tasks button when the text
	  of a groupped notification changes.

2009-02-12  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Coverity fixes:
	* src/home/hd-scrollable-group.c (hd_scrollable_group_parent_changed):
	Initialise width and height.
	* src/tidy/tidy-frame.c (tidy_frame_remove_actor): Set the child NULL
	after unreferencing it, not before.
	* src/tidy/tidy-style.c (tidy_style_set_effect_valist): Remove unused
	variable 'param.name'.

2009-02-12  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-title-bar.h
	* src/home/hd-title-bar.c:
	  Allowed left_pressed to be used from outside (bug 101522)
	* src/home/hd-render-manager.c:
	  Added sync_after function, to change clutter visibilities if they
	  are needed to be done after a transition ends. Fixes bug with
	  zoomed button.
	* src/tidy/tidy-blur-group.c:
	  Added vignette effect for when zooming out
	* src/mb/hd-decor-button.c
	* src/mb/hd-decor-button.h:
	  Cleaned up and added handler for new matchbox press + release
	  signals, to make right buttons highlight correctly.

2009-02-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-title-bar.c (hd_title_bar_set_switcher_pulse):
	  Typo correction to not corrupt HdTitleBar::state when the last
	  notification is closed.

2009-02-11  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c:
	  Now check if home_blur has really changed, and only update if it
	  has. This saves a ~150ms recalc of the blur texture
	* src/mb/hd-atoms.c
	* src/mb/hd-atoms.h
	* src/mb/hd-remote-texture.c:
	  Bugfixing and making remote-texture more like animation-actor
	  (It couldn't be treated like a window and still behave the way
	  we needed it to)

2009-02-11  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#96795

	This is an old bug (tasks button accessible while sysmodal in front)
	but reappeared with HdTitleBar.  HDRM made the wrong actors unreactive.

	* src/home/hd-title-bar.c:
	  Removed dummy HdTitleBar::btn_switcher and ::btn_launcher, which
	  were taken over by buttons[BTN_SWITCHER] and buttons[BTN_LAUNCHER].
	  Make HDRM use these latter actors.
	* src/home/hd-render-manager.c:
	  Don't change the visibility of HDRM_BUTTON_TASK_NAV and
	  HDRM_BUTTON_LAUNCHER but leave it completely up to HdTitleBar.
	  Don't reparent them either.

2009-02-11  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Make application killing dialog look for the app's localized name.
	NB#89600

	* src/launcher/hd-launcher-item.c: Added method to get the localized name
	for a HdLauncherItem.
	* src/launcher/hd-launcher-item.h:
	* src/launcher/hd-launcher.c: Get the localized name directly.
	* src/mb/hd-comp-mgr.c: Added method to get the localized name of the app
	if it's present.
	* src/mb/hd-comp-mgr.h:
	* src/mb/hd-wm.c: Use the app's localized name if it's known.

2009-02-11  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-title-bar.c:
	  Now don't error if no hd-decor, and instead remove the title bar
	* src/tidy/tidy-mem-texture.c (Added)
	* src/tidy/tidy-mem-texture.h (Added)
	* src/tidy/Makefile.am:
	  Added tiled texture that works from a memory area
	* src/mb/hd-remote-texture.c (Added)
	* src/mb/hd-remote-texture.h (Added)
	* src/mb/Makefile.am:
	  New Remote texture window type that handles rendering a shared
	  memory area as a window.
	* src/mb/hd-atoms.c
	* src/mb/hd-atoms.h:
	  New atoms for remote texture control via X
	* src/mb/hd-wm.c
	* src/mb/hd-wm.h:
	  Added HdWmClientTypeRemoteTexture window type

2009-02-11  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_effect):
	  Put back accidentally disabled slide-in transition
	  of notification previews.

2009-02-10  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Show an string in empty task launcher categories.
	Fixes: NB#100588
	
	* src/launcher/hd-launcher-item.c: Added missing 'break'.
	* src/launcher/hd-launcher-page.c:

2009-02-10  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#98542, NB#95193

	* src/home/hd-title-bar.h (HDTB_VIS_BTN_SWITCHER_HIGHLIGHT):
	  New internal top-left button state to signify that the the tasks
	  button hilight shouldn't be cleared because there are unconfirmed
	  notifications in tasw.
	* src/home/hd-title-bar.c:
	  hd_title_bar_set_state(): take advantage of the new state
	  hd_title_bar_set_switcher_pulse():
	    Stop pulsating after two cycles and leave the tasks button
	    highlighted.  Continue the animation from that point unless
	    the button was reset.
	* src/home/hd-task-navigator.h (hd_task_navigator_has_notifications):
	  New interface exported just in case.
	* src/home/hd-task-navigator.c:
	  Reset the top-left button animation at appropriate times.
	  Signal all incoming event notifications, not only the first one.

2009-02-10  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.19

2009-02-10  Jan Arne Petersen  <jpetersen@openismus.com>
	
	Increase size of edges in layout mode to move applets between views.
	Fixes: NB#96802

	* src/home/hd-home.h (HDH_SWITCH_WIDTH): Double the width of the
	edges.

2009-02-10  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-app.c: comment out Laszlo's transiency setting code for
	now to fix the CallUI issue.

2009-02-10  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* tests/test-portrait-win.c:
	  Added the option to test fullscreen mode as well.

2009-02-10  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-render-manager.c (hd_render_manager_create):
	  Resize HdHome when rotating the screen.  If we leave it 800x480
	  all the times set_visibilities() won't believe that it's obscured
	  in application view and leaves it visible.  Then any (= all)
	  applets not supporting portait mode will cause us to rotate
	  the screen back to landscape momentary when a new portrait-capable
	  window is mapped in portrait mode.
	* src/home/hd-home.c:
	  Syntax hilighting correction.

2009-02-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update.

2009-02-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update.

2009-02-09  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/util/hd-transition.c
	* src/util/hd-transition.h:
	Moved progress indicator animation code to save duplication
	* src/home/hd-title-bar.c:
	Added progress indicator animation code for main title bar
	* src/mb/hd-decor.c
	* src/mb/hd-decor.h:
	Changed to use hd-transition for progress indicator, and allowed
	hd-title-bar to use hd_decor_is_waiting

2009-02-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/hildon-desktop.postinst:
	* src/Makefile.am:
	* src/hildon-desktop.schemas (deleted): Remove default backgrounds
	.schema. Fixes: NB#101138.

	* src/hildon-desktop-views.schemas: Update default active views.

	* src/home/hd-home-view.c (hd_home_view_gconf_bgimage_notify): Load
	background images from theme if not available in GConf.

2009-02-09  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	12:34 < kuzak> androide, I think there is a bug in your bug fix: if
	               you kill fullscreen
	               application (e.g. application manager), next time you
		       go to Home, Status Area has vanished

	* src/home/hd-render-manager.c (hd_render_manager_sync_clutter):
	  Consider has_fullscreen only if STATE_IS_APP().

2009-02-09  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Handle fullscreen without forcing clients into one layer or other.
	NB#100720

	* src/mb/hd-app.c:
	  Removed stacking_layer() override.
	* src/mb/hd-comp-mgr.h
	* src/mb/hd-comp-mgr.c:
	  Removed hd_comp_mgr_set_status_area_stacking().
	* src/mb/hd-status-area.c:
	  Removed the LayoutPrefPositionFree layout hint to make it
	  possible to move the client out of screen.  With this flag set
	  the layout manager doesn't permit that.
	* src/home/hd-render-manager.c (hd_render_manager_set_visibilities):
	  Search the whole stack for fullscreen apps.  Introduced has_fullsreen.
	  Rather than influencing its stacking layer move the status area
	  at the same time front_blur is shown/hidden.

2009-02-08  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-theme.c (construct_buttons): Use stack index instead of a
	boolean to allow distinguishing non-stackables from secondary windows.
	* src/mb/hd-app.c (hd_app_init): Add asserts to the end of the
	function to enforce certain invariants for stackable windows. Make
	stackable handling more robust.
	* src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify): Prepare for the case
	of replacing a stackable window in the middle of a window stack. This
	is done by checking whether the mapped window is on top of the stack.
	The HD restart case requires asking Task Navigator about its knowledge
	of the stackable windows. Removed some g_return_if_fails and replaced
	one with g_assert (silent ignoring of internal inconsistency is the
	worst coding style).

2009-02-07  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/home/hd-clutter-cache.c (hd_clutter_cache_class_init): Remove
	g_type_class_add_private call for an empty struct, fixes Glib CRITICAL.
	* src/mb/hd-app.h: Replace secondary_window with stack_index, which is
	based on the value set by the HildonStackableWindow widget.
	* src/util/hd-transition.c (hd_transition_close_app),
	src/mb/hd-theme.c (construct_buttons),
	src/mb/hd-app.c (hd_app_destroy, hd_app_init),
	src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify): Use the new
	stack_index member instead of secondary_window.
	* src/mb/hd-comp-mgr.c: White-space and typo fixes. Added FIXMEs.
	* src/home/hd-render-manager.c (hd_render_manager_set_visible):
	Don't call hd_render_manager_set_input_viewport with an argument,
	it does not take any.
	* src/mb/hd-desktop.c (hd_desktop_realize): Remove unnecessary
	reparenting. (If it is needed, it should be done in libmatchbox side.)

2009-02-06  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (PAN_NEXT_PREVIOUS_PERCENTAGE,
	  hd_home_desktop_release): Set Home panning threshold to 40%.

2009-02-06  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Little cleanups.

	* src/home/hd-render-manager.h
	* src/home/hd-render-manager.c:
	  Removed now superseded hd_render_manager_update_tasks_button().
	* src/home/hd-task-navigator.c:
	  Removed calls to clutter_stage_set_key_focus().
	* src/mb/hd-note.h:
	  Added HD_IS_INCOMING_EVENT_*_NOTE() as shortcuts to check the
	  ::note_type at once.
	* src/mb/hd-comp-mgr.c:
	  Use them.

2009-02-05  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Added command line option `-r' not to worry if a window manager
	is already running but try to take it over.

	* src/main.c (main):
	  Change the hidden root window name to "hildon-desktop".

2009-02-05  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Respect HILDON_DESKTOP_APPS_PRESTART in scratchbox.

	* src/launcher/hd-app-mgr.c (hd_app_mgr_setup_prestart):

2009-02-05  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-title-bar.c:
	Minor change to left-align application titles

2009-02-05  Gordon Williams <gordon.williams@collabora.co.uk>

	These changes require the new theme style, and depend on the 
	symbolic link /etc/hildon/theme being set.

	* src/home/hd-clutter-cache.h
	* src/home/hd-clutter-cache.c:
	Added ability to load a full texture, but still allow it to be 
	stretched while keeping the ends intact.
	* src/home/hd-render-manager.h
	* src/home/hd-render-manager.c
	* src/home/hd-task-navigator.c:
	Allowed render manager to update button state in hd-title-bar,
	and made task-navigator update the top-left button at the correct
	time for new notifications.
	* src/home/hd-title-bar.c
	* src/home/hd-title-bar.h
	* src/mb/hd-theme.h:
	Added new themed toolbar and buttons - moved full-screen toolbar
	into hd-title-bar. Added pulsing glow effect for when there are
	notifications.	
	* src/mb/hd-decor-button.h
	* src/mb/hd-decor-button.c:
	Moved rendering code to hd-title-bar, which handles all buttons
	* src/mb/hd-decor.c
	* src/mb/hd-decor.h:
	Moved rendering of title to hd-title-bar for apps. Added progress
	indicator using new themed graphics

2009-02-04  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#98365

	* src/home/hd-render-manager.h
	* src/home/hd-render-manager.c:
	  hd_render_manager_update_tasks_button() added to synchronize
	  the content of the top-left button.
	* src/mb/hd-comp-mgr.c:
	  Make sure the top-left button is showing the tasw/talu icon
	  as appropriate when an incoming event notification is mapped
	  or unmapped.
	* src/home/hd-task-navigator.c (load_icon):
	  Typo fix.

2009-02-04  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/launcher/hd-app-mgr.c (hd_app_mgr_prestart):
	  New debugging feature: if the $HD_NOPRELOAD environment variable
	  is set do not prestart applications at all.

2009-02-04  Jan Arne Petersen  <jpetersen@openismus.com>

	Do not show notification previews if in switcher. Fixes: NB#99892.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify): Delete preview
	windows if in switcher.

	* debian/changelog: Update.

2009-02-03  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	New and improved HdAppMgr for NB#98239.

	* src/home/hd-render-manager.c: Added a property 'state', now changes
	in state can be tracked with a signal.
	* src/home/hd-render-manager.h:
	* src/launcher/hd-app-mgr.c:
	* src/launcher/hd-app-mgr.h:
	* src/launcher/hd-launcher-app.c: Removed debugging output.
	* src/launcher/hd-launcher.c: Moved prestarting to HdAppMgr.
	* src/mb/hd-comp-mgr.c: Moved low memory management to HdAppMgr.
	* src/mb/hd-comp-mgr.h:
	* src/util/hd-dbus.c: Removed memory signals.

2009-02-03  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Added new D-BUS signal com.nokia.hildon_desktop.exit_app_view for RR
	to be able to switch to task switching view.  The signal has no effect
	if sent in non-application view.

	* src/home/hd-switcher.h
	* src/mb/hd-comp-mgr.c:
	  Removed some obsoleted definitions and declarations.
	* src/util/hd-dbus.c:
	  Signal handler added.

2009-02-03  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Made window hibernation and hibernated window selection
	in switcher view usable.

	* src/home/hd-task-navigator.c:
	  Resurrect hd_task_navigator_hibernate_window().
	  Removed support for hibernated window decoration.
	* src/home/hd-switcher.c (hd_switcher_zoom_in_complete):
	  Crashed when the selected thumbnail belonged to a now
	  hibernated client.
	* src/launcher/hd-app-mgr.c (hd_app_mgr_service_top):
	  Thinko correction: dbus_message_append_args() takes pointers
	  to arguments, even if the argument is a pointer itself.

2009-02-03  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.18

2009-02-03  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.h:
	  Allow clients/actors wider than SCREEN_WIDTH to be considered
	  IS_MAXIMIZED.  Failing so the actor may be parented to app_top
	  by mistake, causing the tasks button to disappear.
	* src/home/hd-render-manager.c:
	  Removed unnecessary full redraw requests when switching between
	  landscale/portrait modes.
	  

2009-02-02  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#94308

	* src/mb/hd-wm.c (hd_wm_get_current_app):
	  Don't be clever about picking the right client.  Earlier we skipped
	  transients and secondary windows in the belief that they are not a
	  different application but it turns out libhildon has a different
	  conception what belongs to an application what doesn't.

2009-02-02  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-app.c (hd_app_stacking_layer):
	  Take the fullscreenness of the transients into consideration
	  when determining the stacking layer.

2009-02-02  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/util/hd-transition.c (hd_transition_subview): Check if the views
	have cm_clients at all before using them.
	* src/mb/hd-app.c (hd_app_init): Read XA_INTEGER instead of XA_STRING
	when reading the stackable window property.

2009-02-02  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* test/portrait-common.c
	* test/test-portrait-dlg.c
	* test/test-portrait-win.c:
	  New test programs.
	* test/test-portrait.c:
	  Obsolete, removed.

2009-02-02  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Initial support for portrait mode.

	* configure.ac:
	* debian/control:
	  Declared dependency on libxrandr-dev

	* src/launcher/hd-app-mgr.h
	* src/launcher/hd-app-mgr.c:
	  New debugging function: hd_app_mgr_dump_app_list()
	* src/mb/hd-atoms.h
	* src/mb/hd-atoms.c:
	  New atoms: _HILDON_PORTRAIT_MODE_REQUEST and _HILDON_PORTRAIT_MODE_SUPPORT.
	* src/mb/hd-app.c:
	  Removed the show(), hide() and focus() overrides that changed the state
	  to APP_FULLSCREEN.  Instead override MBWindowManagerClient::stacking_layer.
	* src/home/hd-switcher.h
	* src/home/hd-switcher.c:
	  Removed status area and menu handing and some interaction with home.
	* src/home/hd-home.h
	* src/home/hd-home.c:
	  Removed status area allocation tracking.
	* src/mb/hd-status-area.c:
	  Take the visibility of the Tasks button into account when configuring
	  the inital geometry of the client.
	* src/mb/hd-dialog.c:
	  Process all ->geometry() calls not only the ones changing the height
	  of the dialog.
	* src/home/hd-task-navigator.c:
	  Don't break if the WM was started in portrait mode.

	* src/launcher/hd-launcher-page.h
	* src/launcher/hd-launcher-grid.c
	* src/launcher/hd-launcher.c
	* src/home/hd-home.c
	* src/home/hd-home-view.c:
	  Always assume landscape orientation.

	* src/home/hd-render-manager.h
	* src/home/hd-render-manager.c:
	  hd_render_manager_set_input_viewport():
	    Block the status area in portrait mode.
	  hd_render_manager_set_order():
	    Added HDRM_STATE_APP_PORTRAIT,
	    recalculate the position of the oplogo, status area and app title,
	    cleanups.
	  hd_render_manager_get_visible():
	    Allow querying the visibility of the tasks button.
	  hd_render_manager_set_state():
	    Placeholder added for the actual rotation.
	    Be smart and if circumstances allow go to PORTRAIT if we'd go to APP.
	  hd_render_manager_place_titlebar_elements():
	    Aded for the status area, oplogo and the app title.
	  hd_render_manager_is_visible():
	    Reworked.
	  hd_render_manager_init():
	    Monitor the size of the stage and synchronize
	    the private containers' size with it.

	* src/mb/hd-comp-mgr.h:
	  Made HD_COMP_MGR_SCREEN_WIDTH and HD_COMP_MGR_SCREEN_HEIGHT reflect
	  the current screen dimensions.  Added HD_COMP_MGR_LANDSCAPE_* for
	  the fixed values.
	* src/mb/hd-comp-mgr.c:
	  hd_comp_mgr_client_property_changed():
	    Monitor the PORTRAIT properties of all clients.
	  hd_comp_mgr_restack():
	    Change to/from portrait mode if necessary because of a new/gone client.
	  hd_comp_mgr_dump_debug_info():
	    Include the stacking layer and actor size in the dump.
	    Also print the list of known running applications.

2009-02-01  Jan Arne Petersen  <jpetersen@openismus.com>

	Add support for special operator applet. Fixes NB#93997

	* src/home/hd-home.c (operator_applet, hd_home_constructed,
	  hd_home_set_operator_applet, hd_home_fixup_operator_position):
	* src/home/hd-home.h: Replace set_operator_icon and set_operator_label
	function with a function to set the operator applet.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify): Set the operator
	applet instead of adding the applet to a home view.

	* src/mb/hd-home-applet.c (hd_home_applet_init): Do not store the
	operator applet to GConf.

	* debian/changelog: Update.

2009-01-31  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Some fixes to 'application not responding' dialog implementation.

	* src/mb/hd-wm.c (hd_wm_client_responding): Show a Hildon banner when
	client is responsive again.
	(hd_wm_make_dialog): New function to create 'application not
	responding' dialog.
	(hd_wm_client_hang): Call hd_wm_make_dialog and handle the response.

2009-01-29  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-render-manager.h (STATE_SHOW_STATUS_AREA): Do not show
	status area in edit mode. Fixes NB#93642, NB#96951

	* debian/changelog: Update.

2009-01-29  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-comp-mgr.c:
	Removed 1px border, added rounding. The fix will rely on the new
	rounding changes to clutter.

2009-01-29  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-comp-mgr.c:
	Fix for 98336, 98577, 98393 - now update a 1px border around the
	damaged area.

2009-01-29  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/util/hd-transition.c:
	Now unrefs objects that matchbox refs
	Removed scroll-out part of subview transition for now (to get 
	around Image Viewer unresponsiveness problems)

2009-01-29  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-app.c (hd_app_init): Patch from Laszlo to set transiency
	of stackable windows. Fixes: NB#97313

2009-01-29  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/util/hd-dbus.c:
	  Removed com.nokia.osso_app_killer.kill.
	* src/mb/hd-comp-mgr.c: hd_comp_mgr_hibernate_client()
	  Don't WM_DELETE but SIGTERM the applications.

2009-01-29  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-clutter-cache.h (Added)
	* src/home/hd-clutter-cache.c (Added)
	* src/home/Makefile.am:
	To allow textures (Eg. for buttons/title bars) to be cached
	* src/home/hd-render-manager.c
	* src/home/hd-switcher.c
	* src/home/hd-render-manager.h
	* src/home/hd-switcher.h
	* src/home/hd-title-bar.h (Added)
	* src/home/hd-title-bar.c: (Added)
	Class to encapsulate things to go in top bar for h-d. Currently
	the launcher/switcher buttons. Will handle animation of them +
	theming shaped background for status area 
	* src/tidy/tidy-sub-texture.c (Added)
	* src/tidy/tidy-sub-texture.h (Added)
	* src/tidy/Makefile.am:
	Special clutter class to show only a small part of a bigger texture.
	Used for theming with clutter.
	* src/mb/hd-theme.c:
	Removal of all rendering code. Added code that works with clutter to
	hd-decor and hd-decor-button
	* src/mb/hd-decor.c
	* src/mb/hd-decor.h:
	Addition to create the required decor using clutter, adding it to
	the clutter group containing the texture (requires libmatchbox as
	of 28-1-09)
	* src/mb/hd-decor-button.c (Added)
	* src/mb/hd-decor-button.h (Added)
	* src/mb/Makefile.am:
	Extension of MBWMDecorButton to create clutter buttons not X buttons

2009-01-29  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hildon-desktop.conf: Update category.

2009-01-28  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/hildon-desktop.install:
	* src/Makefile.am:
	* src/hildon-desktop.conf: Add backup configuration. Fixes NB#96920.

	* debian/changelog: Update.

2009-01-27  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#92409 -- application killer signal

	* src/util/hd-dbus.c:
	  New signal com.nokia.osso_app_killer.kill to kill all known
	  applications wheher they can hibernate or not.
	* src/mb/hd-comp-mgr.c:
	  Send WM_DELETE to HdAppMgr's SHOWN applications rather than
	  all managed clients to save the life of hh, hsm and systemui.
	* src/home/hd-task-navigator.c:
	  Temporarily disabled the handling of hibernated applications
	  until it's done properly.

2009-01-26  Jan Arne Petersen  <jpetersen@openismus.com>

	When a task is open, access the Home view by long pressing the Tasks
	button. Fixes NB#88401

	* src/home/hd-switcher.c (hd_switcher_constructed): connect switcher
	  buttons to button-press and leave events.
	  (hd_switcher_dispose): Remove long press timeout.
	  (hd_switcher_clicked): Only do something if there was no long
	  press.
	  (press_timeout_cb, hd_switcher_press): Add long press timeout.
	  (hd_switcher_leave): Remove long press timeout.
	
	* debian/changelog: Update.

2009-01-26  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.17-1

2009-01-23  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Track application pids.

	* src/launcher/hd-app-mgr.c: Set the correct pid when launching/waking
	up apps.
	* src/launcher/hd-launcher-app.c:
	* src/launcher/hd-launcher-app.h: Added methods to get/set an app pid.

2009-01-23  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/Makefile.am, src/mb/hd-animation-actor.[ch]: New files
	to implement WM-assisted animations class hd-animation-actor.
	* src/mb/hd-atoms.[ch]: Add new atoms for hd-animation-actor.
	* src/mb/hd-wm.c: Detect hd-animation-actor.

2009-01-23  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-theme.c:
	  Don't assume absolute decor placement if we're not using the
	  simple hildon theme.  Since we're using the "hildon" engine now
	  in theme.xml (as opposed to "hildon-simple") that caused the
	  buttons to be fixed at (-1, -1), diregarding their packing.

2009-01-23  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Patch from Laszlo:
	* src/mb/hd-theme.c: Do not modify the global variable left_padding,
	it leads to "crawling title". Fixes: NB#95155

2009-01-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update. NB#99030 is fixed, too.

2009-01-22  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Moved flags in HdLauncherApp to a state variable.
	Also removed a lot of old debugging output.

	* src/launcher/hd-app-mgr.c:
	* src/launcher/hd-launcher-app.c:
	* src/launcher/hd-launcher-app.h:
	* src/launcher/hd-launcher-grid.c:
	* src/launcher/hd-launcher-page.c:
	* src/launcher/hd-launcher-tile.c:
	* src/launcher/hd-launcher-tree.c:
	* src/launcher/hd-launcher.c:
	* src/mb/hd-comp-mgr.c:

2009-01-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hildon-desktop-cud.sh:
	* src/hildon-desktop-rfs.sh: Add scripts to clear user data and reset
	to factory settings. Fixes NB#98971

	* debian/hildon-desktop.install:
	* debian/rules:
	* src/Makefile.am: Install cud and rfs scripts.

	* debian/changelog: Update.

2009-01-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Remove libhildondesktop1 dependency. Add gnome-vfs
	  dependency.

	* debian/changelog: Update.

	* src/mb/hd-desktop.c (hd_desktop_destroy, hd_desktop_init,
	  current_theme_changed):
	* src/mb/hd-desktop.h: Monitor /etc/hildon/theme for theme changes.
	  Fixes NB#98196, NB#98302

2009-01-21  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Add a single define for the default icon, update it to spec.

	* src/launcher/hd-launcher-item.c:
	* src/launcher/hd-launcher-page.c:
	* src/launcher/hd-launcher-tile.c:
	* src/launcher/hd-launcher.h:

2009-01-21  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c
	* src/home/hd-render-manager.h:
	  Added HDRM_STATE_HOME_EDIT_DLG state for home edit dialogs
	* src/mb/hd-comp-mgr.c:
	  Added code to change to and from HDRM_STATE_HOME_EDIT_DLG
	  at the correct times to allow us to return to the home edit
	  mode.

2009-01-21  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Localized applications.desktop.

	* data/desktop/applications.desktop:

2009-01-21  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update. NB#98807 is fixed.

2009-01-21  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/tidy-blur-group.c
	* src/tidy/tidy-blur-group.h:
	  Added a convenience function to see if a blur group is actually 
	  buffering the picture of it's children
	* src/mb/hd-comp-mgr.c:
	  Changes to do a full-screen update and kick the blur actor if an
	  actor that is blurred needs update. Fix for 98298

2009-01-21  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (SETTINGS_BUTTON, applet_settings_button,
	  hd_home_applet_close_button_clicked,
	  hd_home_applet_settings_button_clicked, hd_home_constructed,
	  hd_home_show_applet_buttons, hd_home_hide_applet_buttons): Add
	  support for the settings button.

	* src/mb/hd-atoms.c (hd_atoms_init):
	* src/mb/hd-atoms.h (HD_ATOM_HILDON_APPLET_SETTINGS,
	  HD_ATOM_HILDON_APPLET_SHOW_SETTINGS): Add new atoms.

	* src/mb/hd-home-applet.c (hd_home_applet_init):
	* src/mb/hd-home-applet.h (settings): Read settings property from
	  applet window.

2009-01-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Updated. NB#98719 is fixed.

2009-01-20  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-task-navigator.c:
	  Support for app titles containing tags
	* src/util/hd-transition.c
	* src/util/hd-transition.h
	* src/mb/hd-note.c
	* src/mb/hd-comp-mgr.c:
	  Addition of animations for notifications and secondary windows	
	* src/mb/hd-app.c:
	  Fix for broken pointers in hd-app::leader	
	* src/mb/hd-decor.c
	* src/mb/hd-decor.h
	* src/mb/hd-theme.c:
	  Fix for SIGSEGV caused by progress indicator

2009-01-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unregister_client,
	  hd_comp_mgr_map_notify): Close the status menu if any window (except
	  an applet) is mapped.

2009-01-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (hd_home_view_applet_motion,
	  hd_home_view_applet_release, hd_home_view_restack_applets,
	  hd_home_view_move_applet): Implement proper moving of applets
	  between views. Fixes NB#88327, NB#95452, NB#96802

	* src/home/hd-home.c (hd_home_add_applet): Respect default value for
	  GConf view key.

	* debian/changelog: Update.

2009-01-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (move_applet_left_timeout_cb,
	  move_applet_right_timeout_cb, hd_home_view_applet_motion,
	  hd_home_view_applet_press, hd_home_view_applet_release): Implement
	  switching edges highlighting like in the Home UI Spec.

	* src/home/hd-home.c (_hd_home_do_normal_layout,
	  hd_home_show_switching_edges, hd_home_hide_switching_edges,
	  hd_home_highlight_switching_edges):
	* src/home/hd-home.h: Rename switching edges functions.

2009-01-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (hd_home_view_applet_motion,
	  hd_home_view_applet_press, hd_home_view_applet_release): Does not
	  allow applet to leave permitted area on drag in layout mode. Fixes
	  NB#88390

	* src/home/hd-home.c (hd_home_show_applet_buttons):
	* src/home/hd-home.h: Allow to call hd_home_show_applet_buttons()
	  multiple times with the same applet. Rewmove unused
	  hd_home_move_applet_buttons().

	* debian/changelog: Update.

2009-01-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view-container.c
	  (hd_home_view_container_update_previous_and_next_view,
	  hd_home_view_container_update_active_views, views_active_notify_func,
	  hd_home_view_container_constructed,
	  hd_home_view_container_set_current_view): Also update previous and
	  next view when active views but not current view changed.

2009-01-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (hd_home_constructed): Add left and right switch
	to edit group. Fixes: NB#98209.

	* debian/changelog: Update.

2009-01-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update. NB#96219 is fixed, too.

2009-01-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view-container.c
	  (hd_home_view_container_update_views): Close all applets from a
	  deactivated view. Fixes: NB#95445, NB#94082

	* src/home/hd-home-view.c:
	* src/home/hd-home-view.h: Store applet data in a HashTable instead of
	  the object data.

	* src/home/hd-home.c (hd_home_applet_close_button_clicked,
	  hd_home_close_applet): Add function to close an applet.
	  (hide_cb, hd_home_show_applet_buttons,
	  hd_home_hide_applet_buttons): Use more mature method to hide the
	  close button together with the applet.
	* src/home/hd-home.h:

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unregister_client): Use a more
	mature methode to unregister an applet.

	* debian/changelog: Update.

2009-01-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (hd_home_desktop_key_press): Fix calling from
	Home.

2009-01-18  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/mb/hd-theme.c: Titlebar width is relative to size of status area.

2009-01-16  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher-page.c
	* src/launcher/hd-launcher-page.h
	* src/launcher/hd-launcher-grid.c
	* src/launcher/hd-launcher-grid.h
	* src/launcher/hd-launcher.c
	* src/home/hd-switcher.c
	* src/mb/hd-applet-layout-manager.c
	* src/mb/hd-status-menu.c
	* src/mb/hd-comp-mgr.h
	* src/mb/hd-status-area.c:
	Moved hard-coded references to screen width, height and button sizes
	to refer to the #defines in hd-comp-mgr
	* src/mb/hd-note.c:
	Made IncomingEventPreview notes keep their original size, and be
	positioned at the top of the screen - as per UI Layout guide

2009-01-16  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Application and window matching.
	This commit just adds the basic framework for the new HdAppMgr. Future
	commits will add more functionality.
	Fixes NB#89108

	* src/home/hd-switcher.c (in_transition, hd_switcher_constructed,
	  hd_switcher_relaunch_app, hd_switcher_zoom_in_complete): Go to the
	  task switcher and zoom in on the relaunched app.
	* src/launcher/Makefile.am: Add hd-app-mgr.[c,h]
	* src/launcher/hd-app-mgr.c (I_, _HdAppMgrPrivate, tree, dbus_proxy,
	  HD_APP_MGR_GET_PRIVATE, APP_LAUNCHED, APP_APPEARED, LAST_SIGNAL,
	  app_mgr_signals, LOWMEM_PROC_ALLOWED, LOWMEM_PROC_USED,
	  LOWMEM_LAUNCH_THRESHOLD_DISTANCE, OSSO_BUS_ROOT, OSSO_BUS_TOP,
	  PATH_NAME_LEN, DBUS_NAMEOWNERCHANGED_SIGNAL_NAME, the_app_mgr,
	  hd_app_mgr_get, hd_app_mgr_class_init, hd_app_mgr_init,
	  hd_app_mgr_dispose, hd_app_mgr_launch, hd_app_mgr_relaunch,
	  hd_app_mgr_prestart, hd_app_mgr_wakeup, OOM_DISABLE,
	  _hd_app_mgr_child_setup, hd_app_mgr_execute, hd_app_mgr_service_top,
	  hd_app_mgr_memory_available, hd_app_mgr_dbus_name_owner_changed,
	  hd_app_mgr_match_window):
	* src/launcher/hd-app-mgr.h (__HD_APP_MGR_H__, HD_TYPE_APP_MGR,
	  HD_APP_MGR, HD_IS_APP_MGR, HD_APP_MGR_CLASS, HD_IS_APP_MGR_CLASS,
	  HD_APP_MGR_GET_CLASS, HdAppMgr, HdAppMgrPrivate, HdAppMgrClass,
	  _HdAppMgr, parent_instance, priv, _HdAppMgrClass, parent_class):
	* src/launcher/hd-launcher-app.c (HD_DESKTOP_ENTRY_WM_CLASS, wm_class,
	  prestart_mode, launched, loading, hibernating, main_comp_mgr_client,
	  hd_launcher_app_finalize, hd_launcher_app_parse_keyfile,
	  hd_launcher_app_get_loading_image, hd_launcher_app_get_wm_class,
	  hd_launcher_app_get_prestart_mode, hd_launcher_app_is_launched,
	  hd_launcher_app_set_launched, hd_launcher_app_is_loading,
	  hd_launcher_app_set_loading, hd_launcher_app_is_hibernating,
	  hd_launcher_app_set_hibernating, hd_launcher_app_get_comp_mgr_client,
	  hd_launcher_app_set_comp_mgr_client): Added app lifecycle and window
	  data. This API is not yet finalized.
	* src/launcher/hd-launcher-app.h (__HD_LAUNCHER_APP_H__, parent_class,
	  HdLauncherAppPrestartMode):
	* src/launcher/hd-launcher.c (APP_RELAUNCHED, launcher_signals,
	  hd_launcher_class_init, hd_launcher_application_tile_clicked,
	  hd_launcher_lazy_traverse_tree, hd_launcher_transition_app_start,
	  hd_launcher_transition_new_frame, hd_launcher_get_tree): Removed
	  application management (which goes to HdAppMgr) and added support
	  for re-launching apps.
	* src/launcher/hd-launcher.h (__HD_LAUNCHER_H__, parent_class):
	* src/mb/hd-comp-mgr.c (BLUR_FOR_WINDOW, HdCompMgrPrivate, desktop,
	  render_manager, app_mgr, app, hibernation_key,
	  hd_comp_mgr_client_init, hd_comp_mgr_client_destroy,
	  hd_comp_mgr_client_is_hibernating, hd_comp_mgr_client_get_actor,
	  hd_comp_mgr_init, hd_comp_mgr_unregister_client,
	  hd_comp_mgr_map_notify, hd_comp_mgr_wakeup_client,
	  hd_comp_mgr_get_low_memory_state, hd_comp_mgr_app_from_xwindow):
	  Connect HdCompMgrClient to its app, if it can be found.
	* src/mb/hd-comp-mgr.h (parent):

2009-01-16  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher.h
	* src/launcher/hd-launcher-page.c
	* src/launcher/hd-launcher-page.h
	* src/launcher/hd-launcher.c
	* src/home/hd-render-manager.c:
	  Added timeline_stop code to launcher, and added a gboolean for if
	  timeline is playing - ClutterTimeline uses signals so if we check
	  in the same code we do _play from it returns FALSE
	* src/util/hd-transition.c:
	  Made more sensibile transition time
	* src/mb/hd-comp-mgr.c:
	  Better visibility code
	  Removing flickering on app start

2009-01-16  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c:
	  Fixed blurred home view caused by recent blurring changes
	  Fixed visibility detection code to fix black background issue
	* src/util/hd-transition.c
	* src/util/hd-transition.h:
	  Transitions for notifications - not finished yet
	* src/mb/hd-comp-mgr.c:
	  Screensaver check to fix unmap animation + flicker
	  Further visibility checks for update_area
	  Calls to special transitions for notifications
	  Removed some debug messages

2009-01-16  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-comp-mgr.c: Patch from Laszlo to check for NULL in
	BLUR_FOR_WINDOW macro. Fixes: NB#96990

2009-01-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view-container.c
	  (hd_home_view_container_get_previous_view,
	  hd_home_view_container_get_next_view): 
	* src/home/hd-home-view-container.h: Add functions to get previous and
	next views.

	* src/home/hd-home-view.c (hd_home_view_applet_motion,
	hd_home_view_applet_press, hd_home_view_applet_release): It is only a
	move if moved more than 20 px else it is a tap. Fixes NB#96930.

	* src/home/hd-home.c (hd_home_constructed, hd_home_show_switches):
	Show switches only when next/previous view are available.

	* debian/changelog: Update.

2009-01-15  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c:
	  Removed frontmost window check as not used any more - and it just 
	  breaks scratchbox.

2009-01-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view-container.c
	  (hd_home_view_container_constructed): Set _NET_NUMBER_OF_DESKTOPS
	  property.
	  (hd_home_view_container_set_current_view): Set _NET_CURRENT_DESKTOP
	  property.

	* src/home/hd-home.c: Update.

2009-01-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* data/desktop/applications.desktop: Change icon name to
	general_applications.

2009-01-15  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/tidy-blur-group.c:
	  Disabled pixel shader for blur in scratchbox as it doesn't seem to 
	  work in Xephyr.

2009-01-15  Jan Arne Petersen  <jpetersen@openismus.com>

	Rewrite Home View panning. Fixes: NB#93980, NB#92226, NB#94572,
	NB#94871, NB#96194, NB#96367, NB#96383, NB#96738

	* src/hildon-desktop-views.schemas: Use list instead of ints to store
	  active views in GConf.

	* src/home/Makefile.am: Add hd-home-view-container.[ch]

	* src/home/hd-home-dbus.xml: Remove methods from D-Bus interface
	which are no longer used/available.

	* src/home/hd-home-view-container.c:
	* src/home/hd-home-view-container.h: Add a container for home views.

	* src/home/hd-home-view.c:
	* src/home/hd-home-view.h: Use new HdHomeViewContainer.

	* src/home/hd-home.c:
	* src/home/hd-home.h: Move Home View handling to HdHomeViewContainer.
	  Remove unused code.

	* src/home/hd-render-manager.c: Update for Home View changes.

	* debian/changelog: Update.

2009-01-15  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	We used to decide whether to blur the home when a new something
	was mapped.  Try to be smarter and not to blur whenever e.g. a
	dialog is mapped and we're in home view.

	* src/home/hd-render-manager.c: hd_render_manager_set_order()
	* src/home/hd-render-manager.h
	* src/mb/hd-comp-mgr.c: hd_comp_mgr_effect()

2009-01-14  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher.c:
	  Don't do any launcher transition when opening an application if 
	  we're doing the app opening transition, as no-one will notice
	  and we make the opening transition quicker.	  
	* src/home/hd-render-manager.c:
	  Added some g_object_unrefs that should have existed, and check to
	  see if a window is definitely opaque before we set things below it
          to be invisible

2009-01-14  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-render-manager.c:
	  Don't leave the app view if the user clicks the place of the tasks
	  button while a dialog is showing.  The buttons were unreactive but
	  the current home view reacted and switched the state.

2009-01-14  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	  Don't leave tasw when a new dialog is mapped, except if it's
	  system modal.

2009-01-14  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/mb/Makefile.am: add hd-decor.*
	* src/mb/hd-decor.[ch]: subclass of MBWMDecor which knows about progress
          indicators
	* src/mb/hd-theme.c: make progress indicator per decor rather than
          global

2009-01-13  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/util/hd-gtk-utils.c:
	  Added flag to force 16 bit textures when loaded from GTK (was 32 
          bit previously)
        * debian/control:
	  Increase version requirement for clutter

2009-01-13  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.h
	* src/mb/hd-comp-mgr.c:
	  Stopped Notes blurring the background
	  Stopped update_area when in task launcher (eg. from applets) as it
	  is hard to update the blur texture properly.

	* src/tidy/tidy-blur-group.c:
	  Added Pierre-Luc's modified blur shader that compiles under GL

2009-01-13  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c:
	  Fixed problem where while buttons weren't visible in FKB, they
	  could still be pressed

2009-01-13  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c:
	  Fixed status area + button problem over FKB by looking for
	  fullscreen flag on windows above the status area window

2009-01-13  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.16

2009-01-13  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c:
	* src/home/hd-render-manager.h:
	  Beginnings of status area over FKB fix, and fix for blurred launcher
	  button inside task navigator.

2009-01-13  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.15

2009-01-13  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-switcher.c
	* data/launcher-button-highlight.png:
	  Changed highlight method so we don't use transparancy and can get
	  out full colour depth (bug 97591)
	* src/util/hd-gtk-utils.c:
	  Added fixme for a place where 32 bit textures are still created.
	* src/home/hd-render-manager.c:
	  Made status area and buttons be blurred when background is blurred,
	  by adding the blur_front group, which stayus in home_blur, but is
	  in front of apps.

2009-01-13  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Further CURRENT_APP_WINDOW cleanups.

	* src/mb/hd-comp-mgr.h:
	  Introduced some common macros.
	* src/home/hd-task-navigator.c:
	  Updated to use them.
	* src/home/hd-render-manager.c:
	  Likewise.  Clear the CURRENT_APP_WINDOW property
	  if entering the tasw or talu.
	* src/mb/hd-comp-mgr.c:
	  current_app() => hd_wm_get_current_app()
	* src/mb/hd-wm.h
	* src/mb/hd-wm.c:
	  Added hd_wm_set_current_app_property() to centralize it.
	  hd_wm_get_current_app() takes the client's geometry into account
	  and no longer considers systemui-windows.

2009-01-12  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher.c:
	  Added null pointer check for something that was giving me problems.
	  Possibly only occurs when used with the wrong libs, but good to have.
	* src/home/hd-render-manager.c:
	  hd_render_manager_return_windows only returns 'normal' windows now
	  status menu is raised above the Operator logo and top-left button

2009-01-12  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.14

2009-01-12  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c:
	  remove unneeded commented lines
	* src/mb/hd-comp-mgr.c:
	  fixed possible VKB issues

2009-01-12  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.h
	* src/home/hd-switcher.c:	
	  Now stop blur transitions as soon as app is zoomed right in.
	* src/home/hd-render-manager.c:
	  Method to stop transitions early. 'front' now visible even for
	  fullscreen apps (for notifications in FS mode - eg. 'Max zoom 
	  reached'). Removed code that restacked the current focused app,
	  and now use matchbox order, pulling non-fullscreen dialogs out
	  of the blur box.
	* src/mb/hd-comp-mgr.c:
	  Now return windows before stacking so they can be stacked properly,
	  and don't blur background for fullscreen dialogs (VKB) as hdrm will 
	  leave any fullscreen window in the blurbox.
	* src/home/hd-task-navigator.c: spelling in comment.

2009-01-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#97083

	* src/mb/hd-comp-mgr.c: hd_comp_mgr_restack():
	  Determine and set _MB_CURRENT_APP_WINDOW every time we're
	  restacking windows.  The current_app() logic is meant to be
	  temporary until we understand better what "applications" are.

2009-01-12  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/util/hd-transition.c:
	  Make popup animation vary the anchor point to allow us to
	  continue animation even when the window changes size halfway
	  through.

2009-01-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-render-manager.c:
	  Recognize home applet actors and leave them wherever they are,
	  in the blur group, instead of reparenting them to the arena
	  and let them disappear forever when we go to tasw/talu mode.

2008-01-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	  When a new window is mapped don't activate the desktop even if
	  the current state NEED_DESKTOP(), as client activation causes
	  setting the _MB_WM_CURRENT_APP_WINDOW, which causes trouble
	  with FKB.
	* src/mb/hd-desktop.c:
	  Make the desktop's stacking and the MBWindowManagerFlagDesktop
	  dependant on the current state.

	This also prevents the last application to be shown in home view
	state when some application maps a new dialog.

2009-01-07  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#96936

	* src/home/hd-task-navigator.c:
	  Restore the opacity of the thumbnail's title and foreground tile
	  when we're about to enter the switcher without transition.
	  Make sure they are transparent otherwise.

2009-01-05  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#95641

	* src/mb/hd-note.c:
	  Instead of ignoring ->stack() requests set the layer to Bottom
	  in case of HdNoteTypeIncomingEvent:s.  matchbox is in the belief
	  that the first client of its type wants to stack itself higher.

2009-01-05  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c
	* src/launcher/hd-launcher.c
	* src/util/hd-transition.c
	* src/util/hd-util.c
	* src/util/hd-transition.h

	Moved application started/closed noise making from the navigator
	to the launcher (hd_launcher_transition_app_start()) and
	hd_transition_close_app().

2008-12-30  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/mb/hd-theme.c: further movement towards progress indicator;
	  displays correctly, but needs to be per-window not singleton.

2008-12-30  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Restart always-on dbus services if disconnected.

	* src/launcher/hd-launcher.c (tree, dbus_proxy,
	  DBUS_NAMEOWNERCHANGED_SIGNAL_NAME, hd_launcher_init,
	  hd_launcher_lazy_traverse_tree, hd_launcher_launch,
	  hd_launcher_service_prestart, hd_launcher_service_top,
	  hd_launcher_transition_new_frame,
	  hd_launcher_dbus_name_owner_changed):

2008-12-30  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_client_init): Simplify creation of
	the hibernation hash key: use pointer to the composite client, it is
	unique and already known.
	(hd_comp_mgr_client_get_window_role): Removed as unused.
	(hd_comp_mgr_client_get_window_class): Removed as unused.

2008-12-29  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.13

2008-12-24  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-comp-mgr.c:
	Now skip area updates if an effect is in progress

2008-12-23  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c
	* src/home/hd-render-manager.h
	* src/mb/hd-comp-mgr.c:
	Removed desktop grab for Task Launcher as it wasn't required.
	Added code to use signals to queue redraws in order to avoid
	multiple redraws when several different areas are damaged.

2008-12-23  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-switcher.c:
	Fixed the GLIB CRITICALs and general breakage of task navigator 
	introduced by Kimmo's refactoring.
	* src/home/hd-render-manager.c:
	Added null-pointer check in case get_state is ever called 
	before hd-render-manager is created.

2008-12-22  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Hide the task launcher when clicked on top. Fixes NB#96035

	* src/launcher/hd-launcher.c (hd_launcher_constructed):

2008-12-22  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* TODO: updated, added new and removed old items.

	* src/launcher/hd-launcher.[ch] (hd_launcher_get_back_button): New.
	Needed to allow creating HdLauncher before the render manager.
	(hd_launcher_constructed): Remove hd_render_manager_set_button call.
	The render manager will use hd_launcher_get_back_button to get it.

	* src/home/hd-render-manager.c: Decided to drop the HdRenderManager
	argument from all functions (some had it, some not) because of the
	singleton.
	(hd_render_manager_get): Removed, we don't need multiple render managers.
	(hd_render_manager_create): New. Added to create and initialise the
	render manager. Here the manager is tied to other singletons, such as
	HdTaskNavigator etc.
	(hd_render_manager_finalize): Add the missing unrefs, which would
	really belong to dispose handler, since dispose handler is meant for
	removing of member objects.
	(hd_render_manager_initialised): Removed. The singleton is now always
	initialised at creation time (as far as possible).
	(hd_render_manager_set_order): Remove unnecessary checking code.
	(hd_render_manager_set_comp_mgr): Removed. Set at creation time.
	(hd_render_manager_add_to_front_group): New. This is used for
	reparenting to the front group. Ideally, _get_front_group should be
	removed (hd-transition.c is the only one using it now) since it exposes
	an internal object and encourages distribution of rendering logic.
	(hd_render_manager_set_task_nav, hd_render_manager_set_home,
	hd_render_manager_set_launcher): Removed. Set at creation time.
	(hd_render_manager_set_status_area,
	hd_render_manager_set_status_menu): New. Status Area and Menu are
	dynamically added and removed.
	(hd_render_manager_set_operator): Allow resetting of the operator
	actor since the operator can change.

	* src/home/hd-switcher.c: Add "task-nav" property to allow setting it
	at creation time.
	(hd_switcher_init): Do not create Task Navigator, it is now given to
	us.
	(hd_switcher_constructed): Remove hd_render_manager_get calls. White
	space fixes.
	(hd_switcher_add_status_area, hd_switcher_remove_status_area): Tell
	the render manager, too.

	* src/home/hd-home.c: Remove unused ClutterGroups main_group and
	control_group.
	(hd_home_constructed): Remove hd_render_manager_set_button calls. The
	render manager will ask for the buttons later.
	(hd_home_remove_status_area): Tell the render manager.
	(hd_home_add_status_menu, hd_home_remove_status_menu): Tell the render
	manager.
	(hd_home_get_edit_button, hd_home_get_back_button,
	hd_home_get_operator): New accessors for the render manager.

	* src/util/hd-transition.c (hd_transition_close_app): Optimisation:
	load the particle texture from file only once.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_init): Create Task Navigator here
	instead of in HdSwitcher. Postpone creation of the render manager so
	that other singletons can be passed to it as creation time arguments.

2008-12-22  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/mb/hd-theme.c: now that we paint the decor here in h-d,
	we can do without MB_SECONDARY.

2008-12-22  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-render-manager.c (on_timeline_blur_completed,
	  hd_render_manager_set_blur): Remove wrong cast from Cluttertimeline to
	  ClutterActor.

2008-12-22  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-comp-mgr.c:
	Stopped partial updates happening in Task Navigator, because the
	scaling breaks it.
	* src/home/hd-task-navigator.c:
	Disabled visibility detection on some more clutter actors
	to stop flickering
	* src/home/hd-render-manager.c:
	Removed #define for visibility code as it works fine

2008-12-18  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher-page.c:
	Fix for SIGSEGV

2008-12-18  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c
	* src/home/hd-render-manager.h:
	Removed un-needed grab/ungrab calls
	* src/mb/hd-comp-mgr.c:
	Added workaround for SystemUI windows changing state to STATE_APP
	and blurring on startup.

2008-12-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-render-manager.c (hd_render_manager_set_order): Do not
	  try to hide the status_area actor if it is not there.

2008-12-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-layout-dialog.c (deleted):
	* src/home/hd-layout-dialog.h (deleted): There is now a gtk+ based
	  Activate views dialog in hildon-home.

	* src/home/Makefile.am: Remove hd-layout-dialog.[ch]

	* src/home/hd-home-dbus.xml: Remove ShowActivateViews method from
	  interface.

	* src/home/hd-home.c:
	* src/home/hd-render-manager.c:
	* src/home/hd-render-manager.h: Remove layout mode used by the clutter
	  based Activate views dialog.

2008-12-18  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Removed fake w50 menu, now real .desktop files are read.
	Added hard-coded ordering for applications in main category.
	Added support for X-Text-Domain in .desktop files.

	* data/desktop/Makefile.am: Removed .w50-desktop files.
	* src/launcher/hd-launcher-item.c (hd_launcher_item_parse_keyfile,
	  _hd_launcher_app_main_position, hd_launcher_item_new_from_keyfile):
	* src/launcher/hd-launcher-item.h (HD_LAUNCHER_ITEM_TOP_CATEGORY,
	  HD_APPLICATION_LAUNCHER): Hard-cde which apps and in which order they
	  go in the main category.
	* src/launcher/hd-launcher-tree.c (walk_visit_func): Don't load
	.w50-desktop files.
	* src/launcher/hd-launcher.c (hd_launcher_create_page,
	  hd_launcher_lazy_traverse_tree): If .desktop file has X-Text-Domain,
	  use it.

2008-12-18  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-render-manager.c
	* src/home/hd-task-navigator.c:
	* src/home/hd-home-view.c:
	Added calls to new clutter function actor_set_visibility_detect to
	skip visibility detection on things that don't need it/break
	with it
	* src/mb/hd-comp-mgr.c:
	Added code to add update handlers to TFP textures, and to update
	only the area of the screen that needs updating. This requires a
	new clutter.	

2008-12-17  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Fixes NB#96038
	Pango doesn't do the correct thing when ellipsize is set to NONE and
	wrap to FALSE, so we now clip HdLauncherTile's labels so they don't
	go over their allocation.

	* src/launcher/hd-launcher-tile.c (hd_launcher_tile_set_text,
	  hd_launcher_tile_allocate):

2008-12-17  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	NB#95917

	* src/mb/hd-comp-mgr.c: hd_comp_mgr_close_app()
	  Be prepared to close windows who lost their leaders.
	* src/mb/hd-app.c: hd_app_close_followers()
	  Added some robustness checks.

2008-12-17  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-comp-mgr.c:
	Added fix for SIGSEGV apparently caused by libmatchbox changes

2008-12-17  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Activated preloading for camera UI.

	* data/desktop/camera-ui.w50-desktop:

2008-12-17  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Merged Gordon Williams' render-manager-refactor branch.

	* data/desktop/maemoblocks.w50-desktop:
	* data/desktop/osso_notes.w50-desktop:
	* data/desktop/osso_rss_feed_reader.w50-desktop:
	* data/desktop/osso_sketch.w50-desktop:
	* src/hildon-desktop-views.schemas:
	* src/home/Makefile.am:
	* src/home/hd-home-view.c:
	* src/home/hd-home.c:
	* src/home/hd-home.h:
	* src/home/hd-render-manager.c:
	* src/home/hd-render-manager.h:
	* src/home/hd-switcher.c:
	* src/home/hd-switcher.h:
	* src/home/hd-task-navigator.c:
	* src/home/hd-task-navigator.h:
	* src/launcher/hd-launcher-grid.c:
	* src/launcher/hd-launcher-page.c:
	* src/launcher/hd-launcher-page.h:
	* src/launcher/hd-launcher.c:
	* src/launcher/hd-launcher.h:
	* src/mb/hd-app.c:
	* src/mb/hd-applet-layout-manager.c:
	* src/mb/hd-comp-mgr.c:
	* src/mb/hd-comp-mgr.h:
	* src/mb/hd-theme.c:
	* src/tidy/tidy-blur-group.c:
	* src/tidy/tidy-blur-group.h:
	* src/util/Makefile.am:
	* src/util/hd-transition.c:
	* src/util/hd-transition.h:

2008-12-17  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* home/hd-task-navigator.c: Workaround attempt of the pulseaudio crash.

2008-12-17  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* home/hd-task-navigator.c: Make it able to scroll again.

2008-12-16  Tuomas Kuosmanen  <tuomas.kuosmanen@nokia.com>

	* data/icons/48x48/back-button.png: fixed for demo
	* data/icons/48x48/qgn_tswitcher_close.png: fixed for demo
	* data/icons/48x48/qgn_tswitcher_back.png: fixed for demo

2008-12-16  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.12

2008-12-15  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Zoom out when jumping to the second level in task launcher.

	* src/home/hd-switcher.c (switcher_mode, hd_switcher_constructed,
	  hd_switcher_launcher_cat_launched, hd_switcher_launcher_cat_hidden,
	  hd_switcher_zoom_in_complete):
	* src/launcher/hd-launcher.c (CAT_LAUNCHED, CAT_HIDDEN,
	  hd_launcher_class_init, hd_launcher_back_button_clicked,
	  hd_launcher_category_tile_clicked): Added new signals for launching
	  subcategory and hiding it.

2008-12-15  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/launcher/hd-launcher-page.c, src/launcher/hd-launcher.c:
	Task Launcher animation adjustments from 1:2.2.10-1fix tag.
	
	* src/home/hd-home-view.c (hd_home_view_refresh_bg): Remove debug to
	enable speedier scrolling.

2008-12-15  Jan Arne Petersen  <jpetersen@openismus.com>
	
	* src/home/hd-home.c (hd_home_desktop_key_press, hd_home_init): Only
	  open dialpad if a number was pressed. Add code for the addressbook
	  live search.

2008-12-15  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.11

2008-12-15  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Make main launcher category completely transparent when showing 2nd
	level.

	* src/launcher/hd-launcher.c (hd_launcher_set_top_blur):

2008-12-15  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Hiding the launcher button when zooming in on app is no longer
	necessary. Fixes NB#92583

	* src/home/hd-switcher.c (hd_switcher_item_selected):

2008-12-15  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Switched back to using a fake image for the loading screen.

	* data/Makefile.am:
	* src/launcher/hd-launcher.c (hd_launcher_constructed,
	  hd_launcher_transition_app_start, hd_launcher_transition_new_frame):
	* data/blank-window.png: Updated to latest theme.

2008-12-13  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify): Xmas workaround:
	Hide launcher and switcher if they are shown when a new window is
	mapped. This enables using things like power menu in launcher and
	switcher views.
	* src/home/hd-switcher.h (hd_switcher_hide_launcher): Make public for
	the above code.

2008-12-12  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	Partial checkin of progress indicator implementation.

	* src/mb/hd-atoms.[ch]: Add atom for progress indicator
	* src/home/hd-home.c: Respond to progress indicator change by
	  redrawing screen.
	* src/mb/hd-theme.c: Pick up when to add progress indicator (not
	  yet actually drawn).
	* src/launcher/hd-launcher-app.c: initialise variable to avoid
	  compiler warning.

2008-12-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (hd_home_grab_pointer, hd_home_ungrab_pointer,
	  hd_home_do_normal_layout): Fix pointer grab/ungrab with Home edit
	  menu.

2008-12-12  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Changed the default loading screen to a rect created from the theme's
	bg color. Also, remove it after the animation is complete.

	* data/Makefile.am: Removed the blank-window.png file.
	* src/launcher/hd-launcher.c (launcher_signals,
	  hd_launcher_constructed, _hd_launcher_transition_clicked,
	  hd_launcher_transition_app_start, hd_launcher_transition_new_frame,
	  hd_launcher_transition_completed):

2008-12-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/launcher/hd-launcher.c:
	  Don't exit launcher view to home view when clicking the backgound
	  where the title area would be.

2008-12-12  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Added X-Maemo-Prestarted=always to imageviewer as requested by the
	dev.

	* data/desktop/image-viewer.w50-desktop:

2008-12-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  Doubled the duration of the window fly effect because
	  it became invisibly fast.  Zooming is untouched.

2008-12-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Don't create threads interfering with gdb on sbox/x86
	if $HD_NOTHREADS is defined.

	* src/hildon-desktop.h:
	  hd_disable_threads() defined.
	* src/home/hd-home-view.c:
	* src/launcher/hd-launcher.c
	  Use.
	* src/home/hd-task-navigator.c:
	  Also don't crash if we can't play with canberra.

2008-12-12  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Correct hard-coded menu.

	* data/desktop/hildon-control-panel.w50-desktop:
	* data/desktop/maemoblocks.w50-desktop:
	* data/desktop/mediaplayer.w50-desktop:
	* data/desktop/osso_notes.w50-desktop:
	* data/desktop/osso_rss_feed_reader.w50-desktop:
	* data/desktop/osso_sketch.w50-desktop:
	* data/desktop/rhapsody.w50-desktop:

2008-12-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/hildon-desktop.postinst:
	* src/Makefile.am:
	* src/hildon-desktop-views.schemas:
	* src/hildon-desktop-active.schemas (deleted): Rename .schemas file.

2008-12-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Make noise when a window is added to/removed from the switcher,
	effectively, when an application is opened or closed.

	* configure.ac
	* debian/control:
	  Declared dependency on libcanberra.
	* src/home/hd-task-navigator.c

2008-12-11  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/hildon-desktop.postinst: 
	* src/Makefile.am:
	* src/hildon-desktop-active.schemas: Install schema file for active
	  views.

2008-12-11  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hildon-desktop.schemas: Update bg-image gconf keys.

	* src/home/hd-home-view.c:
	* src/home/hd-home-view.h: Update bg-image gconf keys.

	* src/home/hd-home.c (hd_home_init, hd_home_add_applet):
	* src/home/hd-home.h: Update bg-image gconf keys. Update applet view
	  values.

	* src/mb/hd-desktop.c (hd_desktop_theme_change): Update for new theme
	  dir layout.
	  hd_desktop_stack): Only stack visible applet windows.
	* src/mb/hd-status-area.c (hd_status_area_class_type,
	  hd_status_area_request_geometry, hd_status_area_new): Add debug
	  output.

2008-12-11  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Recognize popup menus and such and add/remove from their
	application's thumbnail in the switcher.

	* src/home/hd-switcher.c
	* src/home/hd-task-navigator.c
	* src/home/hd-switcher.h
	* src/mb/hd-comp-mgr.c

2008-12-11  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.10

2008-12-11  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-wm.h:
	  Changed the definition of HdWmClientType:s; matchbox expects
	  one bit per client type.  Makes application->switcher transition
	  work again.

2008-12-11  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Disable the Tasks button when a system-modal dialog is showing.

	* src/home/hd-home.h
	* src/home/hd-home.c:
	  Added hd_home_get_mode().
	* src/home/hd-switcher.h
	* src/home/hd-switcher.c:
	  Added functions to enable/disable the Tasks button.
	* src/util/hd-util.h
	* src/util/hd-util.c:
	  Added hd_util_is_client_system_modal().
	* src/mb/hd-comp-mgr.c:
	  Disable the Tasks button when a system-modal dialog is mapped.
	  Re-enable if the last system-modal is unregistered.

2008-12-10  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-dbus.xml: Add GetCurrentViewID method to D-Bus
	  interface.

	* src/home/hd-home.c (hd_home_get_current_view_id):
	* src/home/hd-home.h (hd_home_get_current_view_id): Change return
	  value to unsigned int.

2008-12-10  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Adjusted dimming values so foreground is more distinct.

	* src/launcher/hd-launcher.c (hd_launcher_set_top_blur):
	* src/mb/hd-comp-mgr.c (on_blur_timeline_new_frame):

2008-12-10  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Set "ellipsization" to none in launcher tiles.

	* src/launcher/hd-launcher-tile.c (hd_launcher_tile_set_text):

2008-12-09  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/mb/hd-app.c: set MB_SECONDARY on secondary windows

2008-12-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (bg_image_notify, bg_image_dest_height,
	  hd_home_view_allocate, hd_home_view_dispose,
	  get_bg_image_processed_name, process_bg_image_thread,
	  hd_home_view_refresh_bg, hd_home_view_set_property,
	  hd_home_view_get_property, hd_home_view_set_background_image):
	* src/home/hd-home-view.h (priv): Remove unused color/background mode
	  code .

2008-12-09  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-task-navigator.c:
	  Fixed flicker to background that appeared on zoom in/out,
	  added smooth fade in + out of application border + title.

2008-12-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (hd_home_view_constructed,
	  bg_image_set_idle_cb): Replace the old background actor if a new
	  image is set.

2008-12-08  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c: hd_comp_mgr_map_notify():
	  g_return_if_fail(the newly mapped window is the latest in the
	  window stack), which can happen when we're starting to manage
	  clients. Mitigates a NULL-pointer dereference.

2008-12-08  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-app.c (hd_app_init): Patch from Laszlo to check that the
	window in the same window group is indeed a stackable window.
	Fixes: NB#94559

2008-12-08  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.9

2008-12-05  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_set_show_home): Stack the status
	area wm client to the bottom instead of hiding it.

2008-12-05  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (hd_home_remove_status_area): Unparent status
	  area.
	  (hd_home_add_status_area): Add status area to switcher instead of
	  home.
	* src/home/hd-switcher.c (launcher_back_button_clicked,
	  hd_switcher_clicked, hd_switcher_show_status_area,
	  hd_switcher_hide_status_area, hd_switcher_hide_launcher,
	  hd_switcher_show_menu_button): Use new hd_switcher_show_status_area and
	  hd_switcher_hide_status_area functions.

	* src/home/hd-switcher.h: Add hd_switcher_show_status_area and
	  hd_switcher_hide_status_area.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unregister_client,
	  hd_comp_mgr_map_notify): Store the wm client of the staus area.
	  (hd_comp_mgr_set_show_home): Do not show the status area wm client
	  if there is a fullscreen window.

	* src/mb/hd-status-area.c (hd_status_area_init): Use TopMid stacking
	  layer and remove transiency to desktop.
	* src/mb/hd-status-menu.c (hd_status_menu_init): Use TopMid stacking
	  layer and remove transiency to desktop.

2008-12-05  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Hide launcher button when switching to an already open app.
	Fixes NB#92583

	* src/home/hd-switcher.c (hd_switcher_item_selected):

2008-12-05  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-app.c: Show the application's actor when it receives focus.
	  This is a workaround.
	* src/home/hd-switcher.c: Show the tasks button having launched something.

2008-12-05  Gordon Williams <gordon.williams@collabora.co.uk>

	*  src/mb/hd-comp-mgr.c: Removed unmap_notify stuff from the effects
	  function and put it in its own callback. Added popup animation for
	  notifications (not the correct one, but it's a good placeholder)

2008-12-05  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (BACKGROUND_COLOR, background_container,
	  applets_container, hd_home_view_constructed, bg_image_set_idle_cb,
	  hd_home_view_restack_applets, hd_home_view_add_applet): Put the
	  background into a background container, put all applets into an
	  applet container and raise the applets container above the
	  background container. Fixes applets are hidden behind background
	  bug.

2008-12-05  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-switcher.c
	* src/home/hd-task-navigator.c
	Reverted changes for blurred backgrounds on dialogs, as they caused
	problems with the VKB (and any new window that appears after a
	dialog)

	* src/tidy/tidy-blur-group.c
	Added variable initialisation and added a few checks to reduce redraws
	if nothing had changed

2008-12-04  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Prevent unmapping transition for secondary stackable windows. This is a
	temporary fix until the real stackable transitions are added.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_effect_map,
	hd_comp_mgr_effect_unmap):

2008-12-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (hd_home_view_applet_motion): Hide close
	button if an applet is moved. Fixes NB#93709

2008-12-04  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-switcher.c
	* src/home/hd-home.c
	* src/home/hd-task-navigator.c
	* src/home/hd-task-navigator.h
	* src/mb/hd-comp-mgr.c
	* src/mb/hd-comp-mgr.h:
	Allowed main blur to zoom by different amounts (0 for status + dialogs,
        normal for switcher + launcher. Added popup effect for dialogs and 
	blurring of background.

	* src/tidy/tidy-blur-group.c
	* src/tidy/tidy-blur-group.h: Added function to get zoom amount

2008-12-04  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-app.c: Don't accept focus when the clutter actor is hidden.
	  The switcher has an unfortunate habit of hiding actors, about which
	  matchbox knows nothing and may try to transfer focus to an invisible
	  client when another is closed.

2008-12-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update changelog.

2008-12-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (hd_home_view_applet_motion): Show edges of
	  desktop.
	  (hd_home_view_applet_release): Hide edges of desktop.
	* src/home/hd-home.c: Do not show edges if changed in layout mode.

2008-12-04  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-home.c: 
	* src/mb/hd-comp-mgr.c: Made status menu blur out the background
	(had to move to front of stage first) and added pop-up animation 
	for status menu. Fixes NB#93217

2008-12-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (hd_home_view_applet_press): Grab the
	  pointer so it is easier to move an applet. Update modified time of
	  an applet.
	  (hd_home_view_applet_release): Ungrab the pointer.

	  (cmp_applet_modified, hd_home_view_restack_applets): Add function to
	  restack the applets clutter actors according to the modified time.

	  (hd_home_view_add_applet): Restack the applets.

	* src/home/hd-home.c (hd_home_applet_close_button_clicked): Remove all
	  GConf settings for an applet if it closed.
	  (hd_home_add_applet): Use applet id from MBWMClient.

	* src/mb/hd-desktop.c (cmp_applet_modified): Add function to compare
	  modified times.
	  (hd_desktop_stack): Stack the applet windows according to the
	  modified time.

	* src/mb/hd-home-applet.c (hd_home_applet_init): Read modified time
	from GConf.

	* src/mb/hd-home-applet.h (modified): Added modified member.

2008-12-03  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher-page.c
	* src/launcher/hd-launcher-grid.c:
	Added extra checks to make sure we don't get Clutter CRITICALs when an
	Icon cannot be found

2008-12-03  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.8

2008-12-03  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Hard-coded UI spec for w50. Fixes NB#94416
	If there's a .w50-desktop file present, it supplants the real .desktop
	file. This is to present a launcher menu according to the UI spec until
	every app has been updated.

	* configure.ac:
	* data/Makefile.am:
	* data/desktop/Makefile.am: Added .w50-desktop files.
	* data/desktop/applications.w50-desktop:
	* data/desktop/bookmark.w50-desktop:
	* data/desktop/browser.w50-desktop:
	* data/desktop/calendar.w50-desktop:
	* data/desktop/camera-ui.w50-desktop:
	* data/desktop/filemanager.w50-desktop:
	* data/desktop/hildon-application-manager.w50-desktop:
	* data/desktop/hildon-control-panel.w50-desktop:
	* data/desktop/image-viewer.w50-desktop:
	* data/desktop/mahjong_startup.w50-desktop:
	* data/desktop/mediaplayer.w50-desktop:
	* data/desktop/modest.w50-desktop:
	* data/desktop/nokia-maps.w50-desktop:
	* data/desktop/osso-addressbook.w50-desktop:
	* data/desktop/osso-backup.w50-desktop:
	* data/desktop/osso_calculator.w50-desktop:
	* data/desktop/osso_lmarbles.w50-desktop:
	* data/desktop/osso_pdfviewer.w50-desktop:
	* data/desktop/rhapsody.w50-desktop:
	* data/desktop/rtcom-call-ui.w50-desktop:
	* data/desktop/rtcom-messaging-ui.w50-desktop:
	* data/desktop/worldclock.w50-desktop:
	* src/launcher/hd-launcher-app.c (HD_DESKTOP_ENTRY_PRESTART_MODE):
	Changed to X-Maemo-Prestarted.
	* src/launcher/hd-launcher-item.c (HD_DESKTOP_ENTRY_CATEGORY,
	  hd_launcher_item_parse_keyfile): Changed to X-Maemo-Category.
	* src/launcher/hd-launcher-item.h (HD_LAUNCHER_ITEM_DEFAULT_CATEGORY,
	  HD_LAUNCHER_ITEM_TOP_CATEGORY): Gave a name to the top category,
	  non-categorized apps go into applications.
	* src/launcher/hd-launcher-tile.c (hd_launcher_tile_set_icon_name):
	Use a default icon if the given one was not found.
	* src/launcher/hd-launcher-tree.c (walk_visit_func):
	If there's a .w50-desktop file present for an app, ignore the .desktop
	one.
	* src/launcher/hd-launcher.c: Place non-categorized apps in default
	category. Use HD_LAUNCHER_ITEM_TOP_CATEGORY for top level.

2008-12-03  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/Makefile.am: Fixed autoconf warning

	* src/mb/hd-comp-mgr.c: Added TV-style app-close effect

	* src/mb/Makefile.am: Added HD_DATADIR #define as for src/home
	
	* data/white-particle.png
	* data/Makefile.am: Added white particle required for app close	effect

2008-12-03  Tuomas Kuosmanen  <tuomas.kuosmanen@nokia.com>

	* data/launcher-button-highlight.png: 
	* data/icons/48x48/qgn_tswitcher_application.png: 
	* data/icons/48x48/back-button.png: some hack styling for demo

2008-12-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c: Remove unused code (for resizing and settings
	  button).

2008-12-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-switcher.c (hd_switcher_zoom_in_complete): Show status
	  are if a window is selected from the switcher. Fixes NB#93999

2008-12-03  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Fixes for Tasks button
	* src/mb/hd-app.c: show Tasks in hide handler.

2008-12-03  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-app.c: hd_app_destroy():
	  Only show the Tasks button again if we were fullscreen
	  and topmost visible.

2008-12-02  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (hd_home_desktop_key_press): call
	  com.nokia.CallUI.ShowDialpad via D-Bus.
	  (hd_home_init): Get D-Bus proxy for com.nokia.CallUI.

2008-12-02  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher.h
	* src/launcher/hd-launcher.c	
        * src/launcher/hd-launcher-page.c:
	Modified task launcher transition to fade the 'back' arrow in and out

2008-12-02  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Increased tile clicking threshold to make it easier to launch
	applications.

	* src/launcher/hd-launcher-tile.c (hd_launcher_tile_button_release):

2008-12-02  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher.c:
	Now load a blank window image if no other window is chosen. Because
	we can't be sure of apps also made a click on the fake window 
	remove it silently.

	* data/blank-window.png
	* data/Makefile.am:
	Added a blank window image to show the transition with if there wasn't
	one defined in the .desktop file with X-App-Loading-Image

2008-12-02  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher-page.c
	* src/launcher/hd-launcher-page.h : 
        Added function to return the scroll amount of the page

	* src/launcher/hd-launcher.h
	* src/launcher/hd-launcher-app.c
	* src/launcher/hd-launcher-app.h
	* src/launcher/hd-launcher.c:
	Added application launcher transition

	* src/mb/hd-app.c: 
	Added call to remove application start transition when an 
	application window is shown.

2008-12-02  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c: hd_comp_mgr_map_notify():
	  Replace 3+ subsequent stackable windows correctly in the switcher.

2008-12-02  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-switcher.c (hd_switcher_menu_clicked): Move the call to
	ungrab the pointer to hildon-home. So the desktop does not freeze if
	hildon-home is not running.

2008-12-02  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-switcher.c (hd_switcher_show_menu_button): Hide status
	  area. Set the size of the menu button to the size of switcher and
	  staus area.
	  (hd_switcher_hide_menu_button): Show status area.

2008-12-02  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/tidy-blur-group.c
	Made all lines <80 chars long	

2008-12-02  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (hd_home_pan_full): Hide edit button on pan.
	  (hd_home_show_edit_button): Add edit button area to input viewport
	  instead of the grab.
	  (hd_home_hide_edit_button): Remove edit button area from input
	  viewport.
	* src/home/hd-home.h: Make hd_home_hide_edit_button public.

	* src/home/hd-switcher.c (hd_switcher_clicked): Hide edit button if
	  switcher is clicked.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_setup_input_viewport,
	  hd_comp_mgr_turn_on): Update hd_comp_mgr_setup_input_viewport
	  function to accept an array of ClutterGeometry.
	  (hd_comp_mgr_map_notify): Hide edit button if a window is mapped.
	* src/mb/hd-comp-mgr.h: Make hd_comp_mgr_setup_input_viewport public.

2008-12-02  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-switcher.c
	* src/mb/hd-comp-mgr.c
	* src/mb/hd-comp-mgr.h
	Added function to explicitly stop blur and call it from task
	switcher, so when zooming in from an app the end bit doesn't get
	blurred.

2008-12-02  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-launcher.h
	* src/launcher/hd-launcher-page.c
	* src/launcher/hd-launcher-grid.c
	* src/launcher/hd-launcher.c	
	Fixed transitions from sub-menu, added blurring of bottom level
	and zooming out as per UI Transitions

	* src/tidy/tidy-blur-group.c
	* src/tidy/tidy-blur-group.h
	Added options for zoom and mirroring, removed update_children as
	it's always used when off. Stopped blending problems when blurring
	transparent textures
	(but that requires clutter 0.8.2-maemo11)

 	* src/tidy/tidy-animation.c: (removed)
	* src/tidy/tidy-animation.h: (removed)
	* src/tidy/Makefile.am :
	Removed tidy-animation for legal reasons (GPLv3)

	* src/mb/hd-comp-mgr.c
	Lengthened blur a little, added zoom out as per transitions, increased
	blur colour depth because there's no alpha

2008-12-02  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Added a default icon to HdLauncherTile.

	* src/launcher/hd-launcher-tile.c (HD_LAUNCHER_TILE_DEFAULT_ICON,
	  hd_launcher_tile_set_icon_name):

2008-12-02  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  Stop animations when leaving switcher view.

2008-12-02  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_set_show_home): New function.
	Patch from Laszlo Pere. Hide Task Switcher when there is a fullscreen
	application on top. Fixes: NB#89269

2008-12-02  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Task Launcher refactor. Separated UI and data into different classes.
	Also updates to latest UI spec.
	Fixes: NB#92644, NB#89202, NB#88460
	
	* src/home/hd-switcher.c: Changes to new HdLauncher API.
	* src/launcher/Makefile.am:
	* src/launcher/hd-launcher-app.c: Removed UI.
	* src/launcher/hd-launcher-app.h:
	* src/launcher/hd-launcher-cat.c: Removed UI.
	* src/launcher/hd-launcher-cat.h:
	* src/launcher/hd-launcher-grid.c: New UI actor, keeps the app grid.
	* src/launcher/hd-launcher-grid.h:
	* src/launcher/hd-launcher-item.c:
	* src/launcher/hd-launcher-item.h:
	* src/launcher/hd-launcher-page.c: New UI actor, shows a whole app
	category.
	* src/launcher/hd-launcher-page.h:
	* src/launcher/hd-launcher-tile.c: New UI actor, shows an app icon and
	label.
	* src/launcher/hd-launcher-tile.h:
	* src/launcher/hd-launcher-tree.c:
	* src/launcher/hd-launcher.c: New HdLauncher singleton, 
	* src/launcher/hd-launcher.h:
	* tests/test-launcher.c:

2008-12-02  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-theme.c: Patch from Laszlo to keep a reference count in
	the close button, avoiding a crash in certain case. Fixes: NB#93472

2008-12-02  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-switcher.c:
	  Enter the switcher without zooming if the topmost "visible" client
	  /to matchbox' knowledge/ is not visible after all, as it happens
	  after closing the app in application view.

2008-12-02  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-app.c: hd_app_show(), hd_app_destroy():
	  Hide the switcher (Tasks button) when we are showing fullscreen.

2008-12-02  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/home/hd-home.c: Set _NET_CURRENT_DESKTOP and
	_NET_NUMBER_OF_DESKTOPS according to the current view,
	and honour _NET_CURRENT_DESKTOP being set to change the current view.
	Closes #93720.

2008-12-01  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/home/hd-home-view.c (hd_home_view_constructed): Make all home
	views black by default.

2008-12-01  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/tidy-blur-group.c:
	  Moved dimming code to where texture is rendered, so we make better
	  use of our 4bpp. Also means that changes in brightness are much
	  quicker to render.

2008-11-28  Jan Arne Petersen,Berlin  <jpetersen@openismus.com>

	* src/home/hd-home-dbus.xml: Also export the UngrapPointer method.

	* src/home/hd-home.c: grab_pointer is already called when the edit
	  menu is closed.

2008-11-28  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-dialog.c
	* src/util/hd-util.h
	* src/util/hd-util.c:
	  Moved the modal blocker window creation code to a common place.
	* src/mb/hd-note.h
	* src/mb/hd-note.c:
	  Create a modal blocker for information notes like HdDialog does
	  to close them when the user clicks outside the note.

2008-11-27  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/mb/hd-app-menu.[ch]: A HildonAppMenu is a menu, not a dialog.

2008-11-27  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/mb/hd-theme.c: Only non-leader app windows have back buttons.

2008-11-27  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-task-navigator.c:
	  Truncate the thumbnail titles.

2008-11-27  Thomas Thurman  <thomas.thurman@collabora.co.uk>

        (some of this checkin was accidentally in the previous commit)

	* src/mb/hd-theme.c: Menus do not have back buttons, per Tuomas.

2008-11-27  Thomas Thurman  <thomas.thurman@collabora.co.uk>

        Created X windows are named, for debugging.

	* src/home/hd-home.c:
	* src/mb/hd-dialog.c:

2008-11-27  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	  hd_comp_mgr_effect(), hd_comp_mgr_unregister_client():
	  Handle clients which didn't map before leaving.
	  Fixes some CRITICALS caused by systemui.

2008-11-27  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-comp-mgr.c, src/home/hd-home.c,
	src/home/hd-task-navigator.c: Shorten animation durations for the
	managers.

2008-11-26  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-app.c: initialise variable before use, from Laszlo.
	Fixes: NB#92638

2008-11-26  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	  hd_comp_mgr_dump_debug_info(): print more information about
	  client windows.

2008-11-26  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/home/hd-home.c:
	Added more names to actors for debugging
	* src/mb/hd-comp-mgr.c:
	Fixed bug where tapping on the background would cause the screen
	to suddenly blur and fade back in

2008-11-26  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/tidy-finger-scroll.c:
	Changed code for dragging so that position updates immediately
	* src/tidy/tidy-blur-group.c:
	Modified blur group to use new clutter's 'notify-modified' so
	that it now updates if something that is blurred changes.

2008-11-25  Thomas Thurman  <thomas.thurman@collabora.co.uk>

        Move and redraw title when status area changes size or appears or
	disappears.

	* src/home/hd-home.c:

2008-11-25  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.7

2008-11-25  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.h
	* src/mb/hd-comp-mgr.c:
	  Added a @tag parameter to hd_comp_mgr_dump_debug_info() to identify
	  the debug dump as a whole.
	  Include the wm client stack in the debug dump.
	  Add the client's XWindow number for actors.
	* src/main.c
	* src/home/hd-task-navigator.c:
	  More clutter_actor_set_name()s.

2008-11-25  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	  dump_clutter_actor_tree(): if the actor to dump is a ClutterLabel
	  and it doesn't have a name otherwise print the label text as name.
	* src/home/hd-home.c
	* src/home/hd-task-navigator.c:
	  Added more explicit clutter_actor_set_name()s to make debugging
	  easier.

2008-11-24  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  release_win(): Hide the dialogs as well as the application window
	  when exiting the switcher.

2008-11-24  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  hd_task_navigator_add_dialog(): Show the new dialog on the top,
	  regardless of what it is transient for.

2008-11-24  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  When an application window actor is added to the switcher
	  set its clutter name to the class_hint of the client
	  unless it had a name already.

2008-11-24  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/home/hd-task-navigator.c (release_win): Add clutter_actor_hide()
	to fix problem with switching to application when tapping on home.

2008-11-24  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/mb/hd-comp-mgc.c:
	Fixed problem with home view settings window not being shown
	because of clutter ordering

2008-11-24  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-theme.c: Use MB_WM_DECOR_BUTTON_NOHANDLERS for the dummy
	decor button that is created for moving the application title.

2008-11-24  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.h
	* src/mb/hd-comp-mgr.c:
	  hd_comp_mgr_dump_debug_info() added.  Currently it g_debug()s
	  who has the XGetInputFocus() and the clutter actor hierarchy.
	  Call it whenever you want.
	* src/main.c:
	  Dump debug info on SIGUSR1.
	* src/launcher/hd-launcher-utils.c
	* src/home/hd-switcher.c
	* src/home/hd-task-navigator.c:
	  clutter_actor_set_name() some actors to be easier to recognize
	  in the debug dump.

2008-11-21  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/home/hd-home-view.c (get_bg_image_processed_name): Strip extra
	".png" from background image names.
	(process_bg_image_thread): Check for existing file before saving the
	pixbuf.
	(hd_home_view_refresh_bg): Only change the background if the file name
	or mode is different.

2008-11-21  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/tidy/tidy-blur-group.c:
	* src/tidy/tidy-blur-group.h:
	* src/tidy/Makefile.am:
	  Added a tidy/clutter class that blurs all of its children. Fallback
          of dimming for Xephyr which doesn't appear to handle fragment shaders

	* src/mb/hd-comp-mgr.c:
	* src/mb/hd-comp-mgr.h:
	  Added tidy-blur-group and made home view a child of it. Added function
	  to allow background blur to be turned on/off when needed

	* src/launcher/hd-launcher-utils.c:
	  Removed dimmed background (now use blur in hd-comp-mgr)

	* src/home/hd-task-navigator.c:
	  Removed dimmed background (now use blur in hd-comp-mgr)

	* src/home/hd-switcher.c:
	  use blur in hd-comp-mgr for task switcher background


2008-11-21  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (hd_home_desktop_key_press): Add boilerplate
	  handler for KeyPress handling.
	  (hd_home_constructed): Listen for KeyPress events on Home.

2008-11-21  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  Changed the location where the task switcher searches for playing
	  video screenshots to "/var/tmp/app-screenshots/<app-name>".

2008-11-21  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  Bring the application to the foreground instead of trying to
	  close it when it has open dialogs and the user taps the close
	  button in switcher view.

2008-11-21  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Add check for dbus-binding-tool.

	* src/home/Makefile.am: Add generation of hd-home-glue.h file used by
	  D-Bus.

	* src/home/hd-home-dbus.xml: Export some methods of HdHome required by
	  hildon-home to D-Bus.

	* src/home/hd-home.c (HD_HOME_DBUS_NAME, HD_HOME_DBUS_PATH,
	  hd_home_init): Export some methods to D-Bus.

	* src/home/hd-switcher.c (launcher_group, connection,
	  hildon_home_proxy, hd_switcher_constructed,
	  hd_switcher_menu_clicked): Call hildon-home via D-Bus to show the
	  edit menu.

	* src/home/hd-add-applet-dialog.c (deleted):
	* src/home/hd-task-manager.c (deleted):
	* src/home/hd-background-dialog.c (deleted):
	* src/home/hd-add-applet-dialog.h (deleted):
	* src/home/hd-task-manager.h (deleted):
	* src/home/hd-background-dialog.h (deleted):
	* src/home/hd-add-task-dialog.c (deleted):
	* src/home/hd-edit-menu.c (deleted):
	* src/home/hd-add-task-dialog.h (deleted):
	* src/home/hd-edit-menu.h (deleted):
	* src/home/hd-applet-manager.c (deleted):
	* src/home/hd-applet-manager.h (deleted): Moved to hildon-home.

2008-11-21  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home.c (applet_close_button, edit_button_cb, desktop,
	  hd_home_view_background_clicked, hd_home_view_applet_clicked,
	  hd_home_applet_settings_button_clicked, hd_home_constructed,
	  hd_home_set_mode, hd_home_show_activate_views_dialog,
	  hd_home_show_applet_buttons, hd_home_hide_applet_buttons,
	  hd_home_move_applet_buttons):
	* src/home/hd-home.h: Add function to show the Activate views dialog.
	Do not show resize button for applets. Fixes NB#92125.

	* src/mb/hd-applet-layout-manager.c
	(hd_applet_layout_layer_sort_func): Fix a bug which crashed the sort.

2008-11-21  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	  Remove dialogs from the switcher in hd_comp_mgr_effect()
	  rather than hd_comp_mgr_unregister_client() to have access
	  to MBWMClientBase::transient_for.  This fixes critical warnings.
	* src/home/hd-switcher.c:
	  Re-enable handling of dialogs in switcher view.

2008-11-20  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.h
	* src/mb/hd-comp-mgr.c:
	  hd_comp_mgr_close_app() added to allow for closing all clients
	  of a window stack.
	* src/home/hd-switcher.c:
	  Close all clients of a window stack when an application is closed
	  in switcher view.

2008-11-20  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Allow adding and show all its dialogs an application may have
	in switcher view, including any kind of HildonNote:s.

	* src/mb/hd-comp-mgr.c:
	  Add all kinds of HildonNote:s to the switcher.
	* src/home/hd-task-navigator.c:
	  Handle more than one dialog per application.
	* src/home/hd-switcher.c

2008-11-19  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	  When a client is unregistered don't try to remove its actor
	  from the switcher if the client specified to SkipTaskbar.
	  This is to avoid a harmless critical warning at the cost
	  of not removing actors whose client changed that flag.

2008-11-19  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-app.c, src/mb/hd-theme.c: Patch from Laszlo Pere to fix
	the long press handling for the Back button on stackable window.

2008-11-19  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-switcher.c:
	  Ungrab the pointer when hd_swticher_something_removed() and the
	  switcher has become empty, thus leaving it.  Fixes one case of
	  making applications unresponsive to touchscreen events after
	  leaving the switcher.
	* src/home/hd-task-navigator.c:
	  Don't allow interactions with the thumbnails while animation is
	  in progress.  Fixes the weirdness you could observe by tapping
	  the same or another thumbnail while zooming and a crash when
	  you tried to close the zooming thumbnail.
	* TODO:
	  Removed done todos.

2008-11-18  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	  Dont't give system-modal dialogs to the switcher.

2008-11-18  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Show open dialogs in the applications' thumbnail in switcher view.
	Switch to the application if it opens a confirmation note.

	* src/mb/hd-comp-mgr.c:
	  Add/remove dialogs and confirmation notes to the switcher
	  on map/unregister.
	* src/home/hd-switcher.c
	* src/home/hd-task-navigator.c
	* src/home/hd-switcher.h
	* src/home/hd-task-navigator.h

2008-11-18  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.6

	* src/mb/hd-comp-mgr.c, src/mb/hd-theme.c: Patch from Laszlo Pere to
	make stackable windows better supported. Fixes: NB#87040

2008-11-17  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-task-navigator.c:
	  Show the correct (wrt stacking) and up-to-date window title in
	  the thumbnails in switcher view.
	* TODO:
	  Added and removed switcher todos.

2008-11-17  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Show the last frame of a paused video in switcher view.

	* src/home/hd-task-navigator.c:
	  * pixbuf2texture(): Be more robust and check the input pixbuf.
	    Accept pixbufs with alpha channel.
	* src/home/hd-switcher.c:
	  Removed some debug prints.

2008-11-14  Thomas Thurman  <thomas.thurman@collabora.co.uk>

	* src/mb/hd-comp-mgr.c: initialise variable to avoid warning

2008-11-14  Gordon Williams <gordon.williams@collabora.co.uk>

	* src/launcher/hd-dummy-launcher.c
	* src/launcher/hd-launcher-utils.c
	* src/launcher/hd-task-launcher.c
	* src/home/hd-edit-menu.c
	* src/tidy/tidy-scroll-bar.c
	* src/util/hd-gtk-utils.c
	Named some clutter actors to ease debugging
	* src/home/hd-home.c
	Named some clutter actors to ease debugging
	Removed large background texture
	* src/home/hd-home-view.c
	Named some clutter actors to ease debugging
	Removed the solid background rectangle when an image is added
	Background Image added at the same position as previous image

2008-11-14  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 2.2.5

	Removed data/themes

2008-11-13  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-background-dialog.c (hd_background_dialog_init): Set
	window title. Fixes: NB#92490

2008-11-13  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/home/hd-switcher.c:
	Don't add the same window to the switcher more than once,
	as it happens with unfullscreened windows.
	* src/home/hd-task-navigator.c:
	Comment clarification.
	* src/mb/hd-comp-mgr.c:
	hd_comp_mgr_close_client(): don't crash if it's erroneously
	passed NULL.

2008-11-12  Pere Laszlo  <ext-laszlo.pere@nokia.com>

	Make the operator name move out of the way of the status
	area when it resizes.
	closes bug #88444
	patch number 36447
	reviewed by: Thomas Thurman

	* src/home/hd-home.c: add new function
	hd_home_status_area_allocation_changed() to fix up the
	position of the operator name, attached as a callback
	to the size changing signal of the status area
	* src/home/hd-switcher.c: add comment describing function

2008-11-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	Don't add windows marked as SkipTaskbar to the task switcher.

2008-11-12  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	Do a TV-turned-off-like effect when an application is closed
	in switcher view.

	* src/home/hd-switcher.c:
	Keep the switcher open while the effect is running.
	* src/home/hd-task-navigator.h
	* src/home/hd-task-navigator.c:
	Take advantage of clutter_actor_set_anchor_point_from_gravity().
	* src/mb/hd-comp-mgr.c:
	Disable its own TV-turned-off effect in switcher view.
	* TODO:
	Switcher-related todos updated.

2008-11-11  Adam Endrodi  <adam.endrodi@blumsoft.eu>

	* src/mb/hd-comp-mgr.c:
	Fix r31798's patch application which left the application's
	thumbnail in the switcher.

2008-11-10  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/Makefile.am: Add new hd-task-manager.[ch] and
	hd-add-task-dialog.[ch] files.

	* src/home/hd-edit-menu.c (hd_edit_menu_item_release): Add support for
	Add shortcut dialog.

	* src/home/hd-task-manager.c:
	* src/home/hd-task-manager.h: Add class to load the available tasks
	from the .desktop files (used by the Add shortcut dialog).

	* src/home/hd-add-task-dialog.c:
	* src/home/hd-add-task-dialog.h: Add class which implements the Add
	shortcut dialog

	* src/home/hd-applet-manager.c (items_configuration_loaded_cb): Fix
	bug in i18n code.

2008-11-07  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Patch from Tapani Pälli for HildonStackableWindow. This
	implementation will change in the future to support more exotic use
	cases.

	* src/mb/hd-app.c: Tapani's patch.

2008-11-07  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Test for presence of su, which is not available in scratchbox. Copied from
	hildon-home, thanks jpetersen.

	* debian/hildon-desktop.init: If su is not present, launch hildon-desktop
	  directly.

2008-11-06  Adam Endrodi  <adam.endrodi@blumsoft.eu>

 Enhancements in the task switcher view.

 * src/home/Makefile.am
 * src/home/hd-switcher-group.h
 * src/home/hd-switcher-group.c:
   Gone, replaced by src/home/hd-task-navigator.c.
 * src/home/hd-scrollable-group.h
 * src/home/hd-scrollable-group.c:
   Generic scrollable clutter container used by hd-task-navigator.c.
 * src/home/hd-task-navigator.h
 * src/home/hd-task-navigator.c:
   Adds correct thumbnail dimenstions, decorations, effects and arrangements,
   shows incoming event notifications, blurs the background in switcher view
   and is scrollable.
 * src/home/hd-switcher.h
 * src/home/hd-switcher.c:
   Updated for hd-task-navigator.c, now HdSwitcher is more like a control point.
   Handles the closing of notification windows.
 * src/mb/hd-comp-mgr.c:
   Add/remove notifications when the window is mapped/unregistered.
 * src/mb/hd-note.h
 * src/mb/hd-note.c:
   Fixed the handling of infobanners, extended to cover incoming events.
   Also fixed a bug in the class construction code.
 * src/mb/hd-atoms.h
 * src/mb/hd-atoms.c:
   New X window properties for hildon-home/HDIncomingEventWindow:s:
     _HILDON_INCOMING_EVENT_NOTIFICATION_DESTINATION
     _HILDON_INCOMING_EVENT_NOTIFICATION_SUMMARY
     _HILDON_INCOMING_EVENT_NOTIFICATION_ICON
 * TODO:
   Added TODOs for the task switcher and about incoming event notifications.

2008-11-06  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	At least one home view should be active at all times.

	* src/home/hd-home.c (hd_home_activate_view, hd_home_deactivate_view): Moved
	controlling the number of active views to the layout dialog.
	* src/home/hd-layout-dialog.c (hd_layout_thumb_number_key,
	  active_views, hd_layout_dialog_thumb_clicked,
	  hd_layout_dialog_fixup_highlighters, hd_layout_dialog_constructed): Control
	the total number of active views so that at least one is active at all times.

2008-11-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/mb/hd-desktop.c (get_current_theme): Add function to get current
	  theme.
	  (hd_desktop_theme_change): On theme change update gconf background
	  image keys according to the backgrounds/*.desktop file of the new
	  theme.

2008-11-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-applet-manager.c (items_configuration_loaded_cb): Add
	  internationalization support.

2008-10-31  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/control:
	* debian/hildon-desktop.postinst: Fix lintian issues.

2008-10-31  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Release 2.2.4.

	* debian/control: Update requirements.

2008-10-30  Jan Arne Petersen  <jpetersen@openismus.com>

	Implement Add Applet dialog. Fixes NB#88341.

	* configure.ac: Require hildon-1 and libhildondesktop-1.

	* debian/control: Require libhildon1-dev and libhildondesktop1-dev.

	* src/home/Makefile.am: Add new files to sources.

	* src/home/hd-add-applet-dialog.c:
	* src/home/hd-add-applet-dialog.h: Implement the "Add Applet" dialog.

	* src/home/hd-applet-manager.c:
	* src/home/hd-applet-manager.h: Implement an applet manager used by
	the "Add Applet" dialog.

	* src/home/hd-edit-menu.c (hd_edit_menu_item_release): Add support
	for the "Add Applet" dialog.

	* src/home/hd-home.c (hd_home_applet_close_button_clicked): Remove
	applets if they are closed.

	* src/launcher/hd-app-launcher.c (hd_app_launcher_load_from_keyfile):
	Do not try to strchomp NULL strings.

	* src/main.c (main): Initialize GnomeVFS.

2008-10-30  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Improved switcher/launcher button managing logic.
	Fixes: NB#88359

	* src/home/hd-switcher.c (hd_switcher_clicked,
	  hd_switcher_setup_buttons): Changed logic so it hides both buttons when
	  the launcher is shown. Now it also shows the launcher button when in
	  switcher mode.

2008-10-20  Marc Ordinas i Llopis  <marc.ordinasillopis@collabora.co.uk>

	Made the launcher prettier and more similar to the specs.
	Fixes: NB#88439

	* src/Makefile.am: Moved all the hd-gtk-* utils to src/util.
	* src/home/Makefile.am:
	* src/launcher/Makefile.am:
	* src/launcher/hd-app-launcher.c (hd_app_launcher_get_label): Use gtk theme
	color and font to create the launcher label.
	* src/launcher/hd-launcher-item.c
	(hd_launcher_item_get_preferred_width,
	hd_launcher_item_get_preferred_height, hd_launcher_item_allocate,
	hd_launcher_item_paint): Made launcher items fixed sized as per the layout
	guide.
	* src/launcher/hd-launcher-utils.c (background,
	hd_get_application_launcher): Added a background to the main launcher group.
	Moved the other actors to correct positions.
	* src/launcher/hd-task-launcher.c (hd_task_launcher_init): Corrected padding
	and spacing.
	* src/util/Makefile.am:
	* tests/Makefile.am:

2008-10-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/home/hd-home-view.c (hd_home_view_applet_release): Store new
	applet position and view in GConf.
	* src/home/hd-home.c (hd_home_applet_close_button_clicked): Remove
	stored position and view.
	  (hd_home_add_applet): Add applet with stored position and stored
	  view (if available).

	* src/mb/hd-atoms.c (hd_atoms_init):
	* src/mb/hd-atoms.h: Add _HILDON_APPLET_ID and UTF8_STRING atoms.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_map_notify): Store applet id in
	cutter actor.

	* src/mb/hd-home-applet.c (hd_home_applet_destroy): Free applet_id.
	  (hd_home_applet_init): Set applet_id to _HILDON_APPLET_ID window
	  property.
	* src/mb/hd-home-applet.h: Add applet_id argument.

2008-10-14  Marc Ordinas i Llopis <marc.ordinasillopis@collabora.co.uk>

  * src/home/hd-layout-dialog.c (hd_layout_dialog_constructed) : Scale the
  thumbnail view instead of setting its size when using fbos. Fixes: NB#88355

2008-10-13  Marc Ordinas i Llopis <marc.ordinasillopis@collabora.co.uk>

  * src/home/hd-edit-menu.c (hd_edit_menu_init) : Corrected edit menu strings.
  Fixes: NB#88317
  * src/home/hd-edit-menu.c (hd_edit_menu_constructed) : Changed tabs to spaces.

2008-10-07  Marc Ordinas i Llopis <marc.ordinasillopis@collabora.co.uk>

  * src/launcher/hd-app-launcher.c (hd_app_launcher_activate) : Added a child
  setup funcion called by g_spawn_async that sets up the correct priority and
  OOM unprotection. Fixes: NB#87443

2008-09-24  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 1:2.2.3-1

2008-09-22  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/mb/hd-dialog.c (hd_dialog_realize): In the case Matchbox created
	the modal blocker, select for ButtonRelease events on the window. This
	enables us to catch ButtonRelease for system-modal dialogs.

2008-09-20  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 1:2.2.2-1

2008-09-15  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* configure.ac: Add gettext-related stuff from the old code.

	* src/main.c (main): Initialise locale and gettext system.

	* src/hildon-desktop.h: New file for global defines.

	* src/launcher/hd-app-launcher.c (hd_app_launcher_get_label): Use
	gettext() to get localised application name.

2008-09-09  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/launcher/hd-task-launcher.c
	(hd_task_launcher_get_preferred_height): Use amount of rows to
	calculate the height. Fix a one-off problem when determining start of
	a new row. Fixes: NB#88209

	* src/home/hd-home.c (hd_home_constructed): Remove obsolete code for
	adding a search path for temporary icons.

	* Debug printout adjustments here and there.

2008-09-02  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* debian/hildon-desktop.postinst: Added. Modify Gtk icon theme to
	include 48x48 icons. Update Gtk icon cache. Install the GConf schema.

	* debian/hildon-desktop.init: Added. Start and stop hildon-desktop
	using a launch wrapper.

	* src/hildon-desktop.schemas: Added. GConf schema specifying default
	background images.

	* src/Makefile.am: Add installation of the GConf schema.

	* data/icons/Makefile.am, data/icons/48x48/Makefile.am: Install the
	temporary icons to the same directory as the pre-installed ones.

2008-08-29  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* configure.ac: new output file data/themes/Makefile

	* data/Makefile.am: install also themes directory

	* data/icons/48x48/Makefile.am: use a custom icon directory for the
	temporary icons.

	* data/icons/Makefile.am: install a custom icon theme for the
	temporary icons.

	* src/home/hd-home.[ch] (hd_home_constructed): prepend a temporary icon
	directory.
	(hd_home_remove_status_area): New function to handle removal of Status
	Area. Calls corresponding function in HdSwitcher.
	(hd_home_add_status_menu): New function to handle addition of Status
	Menu. Calls corresponding function in HdSwitcher.
	(hd_home_remove_status_menu): New function to handle removal of Status
	Menu. Calls corresponding function in HdSwitcher.
	(hd_home_add_status_area): New function to handle addition of Status
	Area. Calls corresponding function in HdSwitcher.

	* src/home/hd-switcher.[ch] (launcher_back_button_clicked): Add
	controlling of Status Area's visibility.
	(hd_switcher_clicked): Hide Status Area.
	(hd_switcher_item_selected): Show Status Area if the switcher is going
	to disappear.
	(hd_switcher_add_status_menu, hd_switcher_remove_status_menu,
	hd_switcher_add_status_area, hd_switcher_remove_status_area): New
	functions to handle removal and addition of Status Area/Menu. These
	functions don't have much content yet but are later expected to have.
	(hd_switcher_remove_window_actor): Show Status Area when Switcher is
	hidden.
	(hd_switcher_get_control_area_size): Hard-code button width to keep it
	in the spec value.
	(hd_switcher_group_background_clicked): Show Status Area when the Home
	was clicked.

	* src/launcher/hd-app-launcher.c (hd_app_launcher_get_icon): Correct
	the icon size to the specified 64.
	(hd_app_launcher_get_label): Hard-code width to spec value. Disable
	line wrapping in the label.

	* src/launcher/hd-launcher-item.c (struct _HdLauncherItemPrivate): Add
	bg_tile member for the background tile.
	(hd_launcher_item_get_preferred_width,
	hd_launcher_item_get_preferred_height): Throw away fancy arithmetics
	and return the specified value instead!
	(hd_launcher_item_allocate): Use specified pixel sizes where possible.
	(hd_launcher_item_paint, hd_launcher_item_pick): Add painting of
	bg_tile.
	(hd_launcher_item_show): Add showing of bg_tile.
	(hd_launcher_item_hide): Add hiding of bg_tile.
	(hd_launcher_item_finalize): Add destruction of bg_tile.
	(hd_launcher_item_get_icon): Load bg_tile. This should be done more
	intelligently (e.g. shared) and be themeable.
	
	* src/launcher/hd-task-launcher.c (hd_task_launcher_init): Correct
	spacings to specified values.

	* src/mb/Makefile.am: Add hd-status-menu.[ch].

	* src/mb/hd-status-menu.[ch]: New files for handling the Status Menu
	window.

	* src/mb/hd-comp-mgr.c (hd_comp_mgr_unregister_client): Call
	hd_home_remove_status_area() and hd_home_remove_status_menu() for
	closed Status Area and Status Menu respectively.
	(hd_comp_mgr_map_notify): Call hd_home_add_status_area() and
	hd_home_add_status_menu() for mapped Status Area/Menu.

	* src/mb/hd-status-area.c (hd_status_area_class_init): Use new client
	type HdWmClientTypeStatusArea.
	(hd_status_area_init): Add some WM hints and make Status Area
	transient to Home.

	* src/mb/hd-wm.c (hd_wm_client_new): Call hd_status_menu_new() when
	Status Menu is about to be mapped.

	* src/mb/hd-wm.h: Define new WM client types HdWmClientTypeStatusArea
	and HdWmClientTypeStatusMenu.

2008-08-22  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* Added debug printouts and some white space fixes to many different
	places to the code.

	* src/home/hd-switcher.c: Use icon qgn_general_add for the Tasks
	button in Launcher mode.
	(hd_switcher_hide_buttons): Added for hiding Tasks button when
	Launcher is visible.
	(hd_switcher_home_background_clicked): Added for handling the Home
	background clicked signal.
	(launcher_back_button_clicked): Added for handling the back button in
	the launcher. Closes the launcher and makes the Tasks button visible
	again.
	(hd_switcher_constructed): Connect
	hd_switcher_hide_launcher_after_launch to handle actions after an
	application was selected from the launcher. (This should be done with
	some more Glibbish way.) Connect launcher_back_button_clicked to the
	new back button on the launcher. Connect
	hd_switcher_home_background_clicked to handle background-clicked
	signal from the home.
	(hd_switcher_clicked): Fixed pointer grab logic: keep the pointer
	grab whenever the task switcher or task launcher is shown.
	(hd_switcher_hide_launcher_after_launch): New.
	(hd_switcher_item_selected): Ungrab and hide the switcher when an item
	was selected from the switcher. Lower the home so that the selected
	application's window is always visible (sometimes it was not). If the
	actor argument is NULL and the switcher group is empty, ungrab the
	pointer. This is used to handle the case when the last application
	in the switcher closes. (There should be some more elegant way to do
	this.)
	(hd_switcher_setup_buttons): Show the Tasks button in switcher mode
	after the launcher was closed and there are no items in the switcher.
	(hd_switcher_group_background_clicked): Ungrab the pointer if either
	the switcher or launcher was visible, and in that case, hide the
	switcher or launcher.

	* src/launcher/hd-app-launcher.c: Change text_color so that it is
	visible on the screen.
	(hd_app_launcher_get_icon): Implement icon loading using the default
	Gtk+ icon theme.
	(hd_app_launcher_activate_service): New function to implement D-Bus
	activation of applications (mostly copy & paste from the old code).
	(hd_app_launcher_activate): Call hd_app_launcher_activate_service to
	D-Bus activate.
	(hd_launcher_tree_constructor): Use hard-coded paths for now to find
	the desktop and configuration files. (Something evil forces /usr/local
	as prefix.)

	* src/launcher/hd-launcher-utils.[ch]: Add ClutterActor back_button to
	the launcher's private struct.
	(populate_top_launcher): Return FALSE if there are no launcher items.
	(create_back_button): New function to create the back button.
	(hd_launcher_group_set_back_button_cb): New function to set up a
	handler for the back button's button-release-event.
	(hd_get_application_launcher): Add two arguments for the function to
	pass a function to call when an item was selected from the launcher.
	Make the launcher full-screen size, as in the UI spec. Add the back
	button to the top-right corner, as in the UI spec.

	* src/launcher/hd-task-launcher.c: Add the switcher callback as a
	global variable (should be moved to inside an object).
	(launch_animation_complete): Call the switcher callback to cause
	closing of the launcher.
	(hd_task_launcher_init): Define larger top padding to compensate for
	the full-screen size.
	(hd_task_launcher_new): Store the switcher callback into a global
	variable for later use.

	* src/main.c: Disable fatal warnings. They are not useful in this
	development phase.

	* src/mb/Makefile.am: Add new files hd-status-area.[ch].

	* src/mb/hd-atoms.[ch]: Add new atoms for Status Area and Status Menu.

	* src/mb/hd-wm.c: Add support for new window types, corresponding to
	Status Area and Status Menu.

	* src/mb/hd-status-area.[ch]: New files for Status Area window type
	implementation.

2008-08-12  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/Makefile.am: Add defines.

	* src/launcher/hd-app-launcher.[ch]: Parse the Exec key (and remove
	trailing spaces from the service and exec keys); add an activate()
	method to HdAppLauncher that will execute the application.

	* src/launcher/hd-launcher-tree.c: Clean up.

	* src/launcher/hd-task-launcher.c (launch_item): Launch the
	application that has been tapped.

2008-08-08  Chris Lord  <chris@openedhand.com>

	* tests/Makefile.am:
	* tests/test-signals.c:
	Add a background-kill/low-memory signal test application

2008-08-08  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-launcher-utils.c:
	(lazily_populate_top_launcher),
	(lazily_populate_sub_launcher): Use a higher priority for
	populating the launchers.

	(hd_get_application_launcher): Increase the width of the launchers
	and scroll areas to 780px.

	* src/launcher/hd-task-launcher.c:
	(hd_task_launcher_init): Tweak the spacing between items and
	the padding around the launcher.

2008-08-08  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-app-launcher.[ch]: Add prestart key support
	to the AppLauncher class; read and parse the Categories key
	from the desktop entry and allow checking for a category.

2008-08-08  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-app-launcher.c: Wrap the item label and
	center the text.

	* src/launcher/hd-launcher-item.c: The preferred width is
	the width of the icon + padding.

	* src/launcher/hd-task-launcher.c: Increase the spacing and
	the left/right padding.

2008-08-08  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-app-launcher.c:
	* src/launcher/hd-launcher-item.c:
	* src/launcher/hd-launcher-tree.c:
	* src/launcher/hd-launcher-utils.c:
	* src/launcher/hd-task-launcher.c: Populate the top-level
	task launcher with the contents of the LauncherTree.

2008-08-08 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-notification.c:
	* src/home/hd-notification.h:
	Added setters for icon and text.

2008-08-08 Tomas Frydrych  <tf@o-hand.com>

	* src/tidy-frame.h:
	* src/tidy-frame.c:
	Add missing files.

2008-08-08 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-notification.c:
	Removed text color properties; use tidy-stylable API instead.

2008-08-08 Tomas Frydrych  <tf@o-hand.com>

	* configure.ac:
	* src/Makefile.am:
	* src/home/Makefile.am:
	* src/launcher/Makefile.am
	* src/tidy/Makefile.am
	* tests/Makefile.am:
	Moved tidy from src/launcher to src/

	* src/home/hd-notication.h:
	* src/home/hd-notification.c:
	Start of customized notification actor.

2008-08-08  Emmanuele Bassi  <ebassi@openedhand.com>

	* configure.ac: Check for ftw.h and its GNU extensions.

	* src/launcher/Makefile.am:
	* src/launcher/hd-launcher-tree.c:
	* src/launcher/hd-launcher-tree.h: Add a LauncherTree object, which
	will populate itself with the contents of the desktop entries
	following (a subset of) the XDG menu spec.

	* src/launcher/hd-app-launcher.c: Implement the rest of the
	LauncherItem base class methods.

	* src/launcher/hd-launcher-utils.c:
	* src/launcher/hd-launcher-utils.h: Start the launchers tree
	population when needed.

	* tests/test-launcher.c: Enable threading.

2008-08-07 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-edit-menu.c:
	Gettextized.

2008-08-07  Chris Lord  <chris@openedhand.com>

	* src/home/hd-home-view.c (hd_home_view_allocate),
	(hd_home_view_class_init), (get_bg_image_processed_name),
	(bg_image_set_idle_cb), (process_bg_image_thread),
	(hd_home_view_refresh_bg):
	Refresh the background image when the HomeView changes size

2008-08-07 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-background-dialog.c:
	Gettextized.

2008-08-07 Tomas Frydrych  <tf@o-hand.com>

	src/mb/hd-wm.c:
	Removed stale comment.

	src/home/hd-layout-dialog.c:
	(hd_layout_dialog_constructed):
	Gettextized labels.

2008-08-07 Tomas Frydrych  <tf@o-hand.com>

	* configure.ac:
	Added -Wno-format-extra-args (necessary for us to work with the
	hildon logical strings).

	src/mb/hd-wm.c:
	(hd_wm_client_hang):
	Gettextized hand dialog; changed to conform to spec.

2008-08-07 Tomas Frydrych  <tf@o-hand.com>

	* src/mb/hd-dialog.c:
	Implement dialog sizing and positioning logic.

2008-08-05 Robert Bragg  <bob@o-hand.com>

	* tests/test-portrait.c
	* tests/Makefile.am:
	Adds a simple portrait mode unit tests. It basically just lets you
	toggle a property (currently called "_HILDON_SUPPORTS_PORTRAIT_MODE")
	on a gtk window, and create transient dialogs with/without the same
	property set.

2008-08-04  Chris Lord  <chris@openedhand.com>

	* configure.ac:
	Add gconf-2.0 to dependencies

	* src/home/hd-background-dialog.[ch]:
	* src/home/Makefile.am:
	Add hd-background-dialog.[ch]

	* src/home/hd-edit-menu.c (hd_edit_menu_item_release):
	Create and show the background dialog when choosing the
	change-background menu option

	* src/home/hd-home-view.c (hd_home_view_class_init),
	(hd_home_view_get_gconf_path), (hd_home_view_gconf_bgcolor_notify),
	(hd_home_view_gconf_bgimage_notify),
	(hd_home_view_gconf_bgstyle_notify), (hd_home_view_constructed),
	(hd_home_view_init), (hd_home_view_dispose),
	(get_bg_image_processed_name), (bg_image_set_idle_cb),
	(process_bg_image_thread), (hd_home_view_refresh_bg),
	(hd_home_view_set_property), (hd_home_view_get_property),
	(hd_home_view_set_background_color):
	* src/home/hd-home-view.h:
	Use gconf to store background paths, display styles and colours.
	Add threaded background-image processing (resizing, cropping, etc.)

	* src/home/hd-home.c (hd_home_constructed), (hd_home_init):
	Add a gconf directory listener for the hildon-home path, remove
	setting of the background colour for workspaces (this is done by the
	workspace itself now).

	* src/home/hd-home.h:
	Define the hildon gconf root

	* src/main.c (main):
	Initialise GLib threads

2008-08-04 Robert Bragg  <bob@o-hand.com>

	* tests/Makefile.am
	* src/launcher/test-launcher.c
	* src/launcher/Makefile.am:
	Moves test-launcher up into the tests/ dir

2008-08-04 Robert Bragg  <bob@o-hand.com>

	* src/home/hd-switcher.c
	* src/home/hd-home.c
	* src/home/hd-home.h
	* src/util/hd-util.c
	* src/util/hd-util.h:
	Some re-working of the pointer grabbing. We now have just one set of
	hd_home_grub/ungrab_pointer functions (removes the util versions for
	now) It adds more debugging to identify unbalanced ungrab calls.

	Adds a grab when the launcher is run.

2008-08-04 Robert Bragg  <bob@o-hand.com>

	* home/hd-switcher.c:
	Don't use clutter_actor_{show,hide}_all to show/hide the launcher
	use clutter_actor_{show,hide}. (There is an unresloved issue where
	by using the *_all calls breaks input event handling in the
	launcher.)

2008-08-01 Robert Bragg  <bob@o-hand.com>

	* src/home/hd-switcher.c:
	Removes some fidling with the stacking of the switcher group that
	seems to fix stacking bug whereby dialogs can end up hiden below the
	home views.

2008-08-01 Robert Bragg  <bob@o-hand.com>

	* data/icons/48x48/Makefile.am
	* data/icons/48x48/qgn_home_resizer.png
	* data/icons/48x48/qgn_home_edit_mode.png
	* data/icons/48x48/qgn_home_settings.png
	* data/icons/48x48/qgn_home_close.png
	* data/icons/48x48/qgn_general_add.png:
	Adds more icons using the logical names we know of

	* data/menu-button.png:
	Resizes to 56px height to match the height of the title area as
	defined in the master layout document.

2008-08-01 Robert Bragg  <bob@o-hand.com>

	* tests/test-applet.c
	* tests/Makefile.am
	* src/hd-applet-test.c
	* Makefile.am:
	Moves hd-applet-test.c into tests/tests-applet.c and hooks into the
	build scripts.

2008-08-01 Robert Bragg  <bob@o-hand.com>

	* data/icons/48x48/bg-image-switcher.png
	* data/icons/48x48/bg-image-launcher.png:
	Removes a couple of unsed icons

2008-07-31 Robert Bragg  <bob@o-hand.com>

	* src/mb/hd-wm.c:
	Hooks up a handler for unresponsive clients that shows a gtk message
	dialog allowing the user to either wait longer or force the client
	to quit.

	* configure.ac
	* tests/Makefile.am
	* tests/test-hung-process.c:
	Adds a simple unit test to verify the dialog for handling unresponsive
	clients.

2008-07-30 Robert Bragg  <bob@o-hand.com>

	* src/mb/hd-comp-mgr.c:
	removes hd_comp_mgr_client_shutdown_timeout_cb and no longer sets up
	a timeout before calls to mb_wm_client_deliver_delete.

	I think there is no reliable metric for determining if a client has
	responded to a WM_DELETE (since the client can show the user a
	confirmation dialog and cancel any response) Instead we leave it up to
	the NET_WM_PING protocol for detecting unresponsive clients.

	Specifically: Testing if the client process was still running after
	a timeout and killing (-9) if so was particularly bad in the case that
	the client process was actually the WM process :-)

2008-07-30 Robert Bragg  <bob@o-hand.com>

	* src/main.c:
	Initialises gtk+, clutter and mbwm2 so that they behave nicely
	together. Of a few approaches tried, this has worked best. Noteably
	it gives gtk+ a seperate X connection from clutter and mbwm2 so
	that dialogs etc, appear to the window manager as a separate client.

	more rationale is in the comments, but basically trying to do client
	like things in-process with the WM turnes out to be a a Bad Idea (tm)
	not least because it breaks the SubStructureRedirect mechanism.

	NB: You must build your libmatchbox2 without passing --with-gtk !

2008-07-30 Robert Bragg  <bob@o-hand.com>

	* src/mb/hd-wm.c:
	Make sure we never interpret the window type for override redirect
	windows. (E.g. we were handling an 1px x 1px offscreen window - used
	by the gtk color selector for grabbing input - as an application
	window and creating a full screen frame and title bar etc)

	* src/home/hd-home.c:
	Don't mark the input only desktop window as override redirect; it
	is enough that it is marked as NET_WM_WINDOW_TYPE_DESKTOP.

2008-07-30  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-launcher-utils.c:
	(hd_get_application_launcher): Add padding.

	* src/launcher/test-launcher.c: Remove the positioning code,
	since the padding is done by the launcher group already.

2008-07-30  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-launcher-utils.c: Put the sub-level task
	launcher into its own FingerScroll, and animate the FingerScroll
	actor instead of directly the TaskLaunchers, when switching
	between top-level and sub-level.

	* src/launcher/hd-task-launcher.c: Take a reference on the
	members of the launcher closure, so that they won't disappear
	before the effect is complete; this fixes launching items
	from the sub-level task launcher.

2008-07-30  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-dummy-launcher.c: Use a random color for
	the dummy launcher icon; shorten the "bounce" effect duration.

2008-07-29  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-task-launcher.c (launch_item): Hardcode
	the size and position of the launcher pre-load icon.

2008-07-29  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-dummy-launcher.c: Add an animation when
	showing the launchers, as per UI spec.

2008-07-29 Robert Bragg  <bob@o-hand.com>

	* src/applet-settings-button.png
	* src/applet-resize-button.png
	* src/bg-image-switcher.png
	* src/edit-button.png
	* src/bg-image-launcher.png
	* src/back-button.png
	* src/menu-button.png
	* src/close-button.png
	* src/hibernation-icon.png:
	Removes the pngs that should have gone with my previous
	theme changes. (The equivalent images now live under
	data/ and data/icons/)

	* data/themes/FremantleDev/mbwm2/theme.xml:
	typo, change template-pad-width -> template-pad-length
	adds show-title="yes"
	Note: Currently the theme engine doesn't understand about
	the icons at the top left of the screen and tries to
	print the title aligned to the left of the screen.

	* data/themes/FremantleDev/mbwm2/template.png:
	adds a close button to the template. Note though there
	was a bug with calculating the button position in the
	png theme engine. You will need to pull the latest
	mbwm2 for the close button to work)

	* data/launcher-button-highlight.png:
	* src/home/hd-switcher.c:
	Improved compositing of the swither/launcher icons. They
	are now composed of a solid colour background, a 48x48
	icon and a light higlight texture.

2008-07-29  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/home/hd-switcher.c:
	(hd_switcher_constructed): If you don't add actors to a group
	it'll be slightly difficult for Clutter to draw them.

2008-07-29  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/Makefile.am:
	* src/home/Makefile.am:
	* src/home/hd-switcher.c: First, raw pass at integrating the
	launcher into the desktop. WARNING: might break everything.

2008-07-29  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/Makefile.am:
	* src/launcher/hd-launcher-utils.[ch]:
	* src/launcher/test-launcher.c: Prepare integration of the task
	launcher into the desktop by moving the whole build sequence of
	the launchers, animations and callbacks into a single function.

2008-07-29  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-task-launcher.c:
	(launch_item),
	(hd_task_launcher_real_item_clicked): Update the animation of
	the application launcher; now it will use the right actor as
	the starting point of the "growing" animation.

2008-07-29  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/Makefile.am:

	* src/launcher/hd-launcher-item.c: Remove unused effect template.

	* src/launcher/test-launcher.c: Move the application launcher
	animation from here...

	* src/launcher/hd-task-launcher.c: ... to here, where it belongs.

	* src/launcher/tidy/Makefile.am:
	* src/launcher/tidy/tidy-animation.[ch]:
	* src/launcher/tidy/tidy-interval.[ch]: Add tweening API for
	Tidy.

2008-07-29  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-task-launcher-private.h:
	* src/launcher/hd-task-launcher.c: Small clean ups.

2008-07-29  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/tidy/tidy-scroll-view.c:
	(tidy_stylable_iface_init): Make the scroll bars slighly less
	big.

2008-07-29  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-task-launcher.c: Update the adjustment range
	each time a launcher has been added to the HdTaskLauncher.

	* src/launcher/tidy/tidy-scroll-bar.c: Resync from tidy trunk
	to fix a segmentation fault.

2008-07-28  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/Makefile.am:
	* src/launcher/main.c:
	* src/launcher/test-launcher.c: Rename the test-launcher source
	file.

2008-07-28 Robert Bragg  <bob@o-hand.com>

	* src/launcher/tidy/Makefile.am:
	support out of tree builds

2008-07-28  Emmanuele Bassi  <ebassi@openedhand.com>

	* src/launcher/hd-task-launcher.c:
	(hd_task_launcher_get_preferred_height),
	(hd_task_launcher_class_init): Compute the preferred height for the
	task launcher.

2008-07-28  Emmanuele Bassi  <ebassi@openedhand.com>

	Integrate the launcher in SVN. This is an initial implementation
	that's useful to check the effects and the integration: the actual
	loading and saving of the launcher contents is being reworked to
	allow the user to change the layout.

	* configure.ac:
	* src/Makefile.am:
	* src/launcher/Makefile.am: Add the launcher section.

	* src/launcher/hd-launcher-item.c:
	* src/launcher/hd-launcher-item.h: Base class for the launcher items;
	actors implementing this class must provide an icon and a label for
	the TaskLauncher to lay out inside its grid.

	* src/launcher/hd-app-launcher.c:
	* src/launcher/hd-app-launcher.h: Abstraction of the KeyFile provided
	by an application.

	* src/launcher/hd-dummy-launcher.c:
	* src/launcher/hd-dummy-launcher.h: "Dummy" launcher item.

	* src/launcher/hd-task-launcher-private.h: Private declarations.

	* src/launcher/hd-task-launcher.c:
	* src/launcher/hd-task-launcher.h: Main container actor.

	* src/launcher/main.c: Test environment, to avoid breaking the desktop
	until we have the Launcher ready.

	* src/launcher/tidy: Internal copy of actors and objects from Tidy.
	We need them for the finger pannable launcher.

2008-07-24 Robert Bragg  <bob@o-hand.com>

	* configure.ac:

	make sure we link against clutter-0.8 not clutter-0.7

2008-07-21 Robert Bragg  <bob@o-hand.com>

	* src/main.c
	* src/home/hd-gtk-style.c:
	Adds code for using GtkStyle info from a number of singleton gtk
	widgets.

	* src/home/hd-gtk-utils.c
	* src/home/hd-gtk-utils.h:
	Created some utility code for loading icons into a ClutterTexture and
	having a fallback (currently just a blank ClutterRectangle) when the
	icon can't be loaded.

	* src/home/hd-layout-dialog.c
	* src/home/hd-switcher-group.c
	* src/home/hd-home.c
	* src/home/hd-switcher.c
	* src/home/hd-gtk-style.h
	* src/home/Makefile.am
	* src/mb/hd-comp-mgr.c:
	Updated various harded coded colors, fonts or clutter texture icon
	initialisations to use the above code so the values can come from
	gtk style themes and gtk icon themes.

	* configure.ac
	* Makefile.am
	* data
	* data/themes
	* data/themes/FremantleDev
	* data/themes/FremantleDev/gtk-2.0
	* data/themes/FremantleDev/gtk-2.0/gtkrc
	* data/themes/FremantleDev/mbwm2
	* data/themes/FremantleDev/mbwm2/theme.xml
	* data/themes/FremantleDev/mbwm2/template.png:
	Adds a simple initial "hildon" mbwm2 theme and simple gtk theme
	for testing with.

	NB:
	- To pick up the development gtk theme you currently need to export
	GTK2_RC_FILES=/path/to/src/data/themes/FremantleDev/gtk-2.0/gtkrc
	- To pick up the development mbwm2 theme you need to pass
	-theme /path/to/src/data/themes/FremantleDev/mbwm2/theme.xml
	on the hildon-desktop command line.

	* data/Makefile.am
	* data/icons
	* data/icons/48x48
	* data/icons/48x48/applet-settings-button.png
	* data/icons/48x48/applet-resize-button.png
	* data/icons/48x48/qgn_tswitcher_right.png
	* data/icons/48x48/bg-image-switcher.png
	* data/icons/48x48/qgn_tswitcher_back.png
	* data/icons/48x48/qgn_home_close.png
	* data/icons/48x48/qgn_tswitcher_application.png
	* data/icons/48x48/qgn_tswitcher_close.png
	* data/icons/48x48/Makefile.am
	* data/icons/48x48/bg-image-launcher.png
	* data/icons/48x48/hibernation-icon.png
	* data/icons/48x48/back-button.png
	* data/icons/48x48/qgn_tswitcher_left.png
	* data/icons/Makefile.am:
	Re-organises the .png icons to be installed under $prefix/share/icons
	to be picked up by the gtk_icon theme/cache code.

	Renames some of the .png files to their logical names.

	NB:
	You currently need to export
	XDG_DATA_DIRS="/path/to/prefix/share:/usr/local/share/:/usr/share/")
	for the icons to be found.

	* data/menu-button.png
	* data/edit-button.png:
	Installs other misc images under $prefix/share/hildon-desktop for now.
	It's no longer neccisary to run hildon-desktop in the same dir as
	the .png files

2008-07-17 Tomas Frydrych  <tf@o-hand.com>

	* src/mb/Makefile.am:
	* src/mb/hd-comp-mgr.c:
	* src/mb/hd-comp-mgr.h:
	* src/mb/hd-desktop.c:
	* src/mb/hd-home-applet.c:
	* src/mb/hd-home-applet.h:
	* src/mb/hd-applet-layout-manager.c:
	* src/mb/hd-applet-layout-manager.h:
	Implemented automatic applet layout per specification.

2008-07-16 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home-view.c:
	* src/home/hd-home.c:
	* src/home/hd-switcher-group.c:
	* src/home/hd-switcher-group.h:
	* src/home/hd-switcher.c:

	Implemented panning in the switcher.

2008-07-15 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home.c:
	Disabled applet sittings button (it has been removed from the
	spec, but there is some uncertanity whether it will not come back,
	hence the #ifdefs).

2008-07-15 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home.c:
	(hd_home_add_applet):
	(hd_home_remove_applet):
	Support for sticky applets.

2008-07-04 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-layout-dialog.c:
	(hd_layout_dialog_constructed):
	Fixed bad cast.

	* src/home/hd-home-view.c:
	* src/home/hd-home-view.h:
	Support for background modes.

2008-07-04 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home-view.c:
	Split background into solid color and image.

2008-07-04 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home-view.c:
	* src/home/hd-home-view.h:
	* src/home/hd-home.c:
	* src/home/hd-home.h:
	* src/home/hd-layout-dialog.c:
	Layout managing mode: added thumbnails to dialog, connected event
	handlers.

2008-07-04 Tomas Frydrych  <tf@o-hand.com>

	* src/home/Makefile.am:
	* src/home/hd-home.c:
	* src/home/hd-layout-dialog.h:
	* src/home/hd-layout-dialog.c:
	Initial refactoring of layout managing mode to matched the updated
	spec.

2008-07-03 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home-view.c:
	* src/home/hd-home-view.h:
	* src/home/hd-home.c:
	* src/home/hd-home.h:
	Implemented moving of applets across view boundary.

2008-07-03 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home-view.c:
	* src/home/hd-home.c:
	* src/home/hd-home.h:
	Controls for switching home view while dragging an applet.

2008-07-03 Tomas Frydrych  <tf@o-hand.com>

	* configure.ac:
	Put back -Werror following fix in clutter headers.

	* src/home/hd-home.c:
	(hd_home_fixup_operator_position):
	Removed spurious line of code.

2008-07-03 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home.c:
	* src/home/hd-home.h:
	* src/home/hd-switcher.c:
	* src/home/hd-switcher.h:
	* src/mb/hd-comp-mgr.c:
	* src/mb/hd-comp-mgr.h:
	Added operator label and basic API for setting text and icon.

2008-07-02 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-switcher-group.c:
	( hd_switcher_group_zoom_out):
	Ensure that the actor we are zooming is topmost.

2008-07-02 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-switcher-group.c:
	Refactored zoom-out effect to match the current spec.

2008-07-01 Tomas Frydrych  <tf@o-hand.com>

	* configure.ac:
	Temporarily remove --Werror until an issue in clutter headers is
	fixed upstream.

	* src/mb/hd-comp-mgr.c:
	Shortened timeout for unmap effect.

2008-06-30 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-switcher-group.c:
	(hd_switcher_group_remove_actor):
	Reparent the actor if appropriate.

	* src/mb/hd-comp-mgr.c:
	Added a counter for running unmap effects to control stacking order
	while unmap effects are running.

2008-06-18 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home.c:
	Added background to HdHome actor.

2008-06-18 Tomas Frydrych  <tf@o-hand.com>

	* src/hd-applet-test.c:
	Added --view-id parameter.

2008-06-18 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home.c:
	* src/home/hd-home.h:
	* src/mb/hd-comp-mgr.c:
	* src/mb/hd-comp-mgr.h:
	* src/mb/hd-desktop.c:
	Implemented specialized HdDesktop::stack() method to handle applet
	visibility.

2008-06-16 Tomas Frydrych  <tf@o-hand.com>

	* src/mb/hd-theme.c:
	(construct_buttons):
	Removed some testing code.

2008-06-16 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-switcher-group.c:
	(hd_switcher_group_hide_all):
	Added explicit call to clutter_actor_show() when reparenting
	client actors back to original parent.

2008-06-16 Tomas Frydrych  <tf@o-hand.com>

	* src/home/home.c:
	(hd_home_remove_view):
	(hd_home_do_layout_contents):
	Ensure correct position of Home in layout mode when last view in
	the list is removed.

2008-06-13 Tomas Frydrych  <tf@o-hand.com>

	* src/home/hd-home.c:
	Fixed layout view when a view is removed.

2008-06-13 Tomas Frydrych  <tf@o-hand.com>

	* src/mb/Makefile.am:
	* src/mb/hd-dialog.c:
	* src/mb/hd-dialog.h:
	* src/mb/hd-wm.c:
	Custom MBWMClientDialog subclass to handle hildon peculiarities.

2008-06-12 Tomas Frydrych  <tf@o-hand.com>

	* src/home/Makefile.am:
	* src/home/hd-home.c:
	* src/home/hd-home.h:
	* src/home/hd-switcher.c:
	* src/home/hd-edit-menu.h:
	* src/home/hd-edit-menu.c:
	* src/mb/hd-comp-mgr.c:
	* src/mb/hd-comp-mgr.h:
	Home edit menu.

2008-06-12 Tomas Frydrych  <tf@o-hand.com>

	* src/mb/hd-app.c:
	(hd_app_close_followers):
	Hooked into  mb_wm_client_deliver_delete() mechanism.

2008-06-12 Tomas Frydrych  <tf@o-hand.com>

	* src/main.c:
	* src/mb/Makefile.am:
	* src/mb/hd-atoms.c:
	* src/mb/hd-atoms.h:
	* src/mb/hd-wm.c:
	* src/mb/hd-wm.h:
	Custom HdAppMenu subclass of MBWMClientDialog to handle Hildon
	application menu windows.

2008-06-12 Tomas Frydrych  <tf@o-hand.com>

	* src/mb/Makefile.am:
	* src/mb/hd-atoms.c:
	* src/mb/hd-atoms.h:
	* src/mb/hd-wm.c:
	* src/mb/hd-note.h:
	* src/mb/hd-note.c:
	Custom HdNote subclass of MBWMClientNote to handle Hildon
	notifications (banners, infos and confirmations).

2008-06-12 Tomas Frydrych  <tf@o-hand.com>

	* src/hd-applet-test.c:
	Added couple of sliders to the sample applet.

2008-06-12 Tomas Frydrych  <tf@o-hand.com>

	* src/mb/hd-app.c:
	* src/mb/hd-app.h:
	* src/mb/hd-theme.c:
	More of Hildon stackable window back button code.

2008-06-11  Tomas Frydrych  <tf@o-hand.com>

	* src/mb/hd-theme.c:
	Skeleton for handling presses on Hildon stackable window back
	button.

2008-06-11  Tomas Frydrych  <tf@o-hand.com>

	* src/mb/hd-app.c:
	* src/mb/hd-app.h:
	* src/mb/hd-theme.c:
	Fixed handling of hildon stackable windows so that legacy
	applications continue to work as they used to.

	* src/mb/hd-atoms.c:
	* src/mb/hd-atoms.h:
	Added _HILDON_STACKABLE_WINDOW atom.

2008-06-11  Tomas Frydrych  <tf@o-hand.com>

	* src/mb/Makefile.am
	* src/mb/hd-app.h:
	* src/mb/hd-app.c:
	* src/mb/hd-theme.c
	* src/mb/hd-wm.c
	Custom MBWMClientApp subclass to allow handling of hildon views.

2008-06-11  Tomas Frydrych  <tf@o-hand.com>

	* src/mb/hd-comp-mgr.h:
	Replace binary flags in HdCompMgrClientPrivate with boolean fields
	to improve clarity.

2008-06-11  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home-view.c:
	Connect/disconnect captured-event handler selectively for
	thumbnail mode only.

2008-06-11  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home-view.c:
	Handle thumbnail mode via capture-event signal instead of using a
	mouse trap actor.

2008-06-10  Tomas Frydrych  <tf@o-hand.com>

	* src/mb/hd-theme.c:
	* src/mb/hd-theme.h:
	Added HdThemeSimple, subclass of MBWMTheme, to simplify testing
	in the absence of real, png-based theme.

2008-06-10  Tomas Frydrych  <tf@o-hand.com>

	* src/main.c:
	* src/mb/Makefile.am:
	* src/mb/hd-theme.h:
	* src/mb/hd-theme.c:
	Start start of a customized MBWMTheme subclass.

2008-06-10  Tomas Frydrych  <tf@o-hand.com>

	Restructured source tree to improve clarity:

	* src/mb:   Matchbox subclasses,
	* src/home: Home (clutter subclasses),
	* src/util: Auxiliary stuff.

2008-06-09  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-switcher-group.c:
	(hd_switcher_group_zoom):
	Fixed group position before zoom effect.

2008-06-09  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	Correctly terminate applet resizing when release lands outside of
	the resize button.

2008-06-09  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-atoms.c:
	* src/hd-atoms.h:
	* src/hd-home.c:
	Hooked up settings button.

	* src/hd-applet-test.c:
	Added ClientMessage handler.

2008-06-09  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	Applet resizing.

2008-06-09  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home-view.c:
	* src/hd-home.c:
	* src/hd-home.h:
	Applet dragging.

2008-06-09  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c:
	(hd_comp_mgr_class_init):
	Fixed typo.

	* src/hd-home.c:
	Hooked up applet close button.

2008-06-09  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home-view.c:
	* src/hd-home.c:
	* src/hd-home.h:
	Added edit mode applet decors and signal handlers.

2008-06-05  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home-view.c:
	* src/hd-home-view.h:
	* src/hd-home.c:
	Start of Home edit mode.

2008-06-05  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-atoms.c:
	* src/hd-atoms.h:
	* src/hd-home.c:
	Added simple ClientMessage-based mechanism for applet-initiated
	home panning.

	* src/hd-applet-test.c:
	Simple Home applet.

2008-06-05  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c:
	(hd_comp_mgr_top_home):
	(hd_comp_mgr_home_clicked):
	Implemented topping of home.

	* src/hd-home-applet.c:
	(hd_home_applet_init):
	Make transient for HdDesktop client.

	* src/hd-home.c
	(hd_home_constructed):
	Revert default mode to NORMAL.

	* src/hd-switcher.c:
	* src/hd-switcher.h:
	(hd_switcher_deactivate):
	API to deactivate switcher and restore normal stack order.

2008-06-04  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home-view.c
	* src/hd-home-view.h
	* src/hd-home.c
	* src/hd-home.h
	Refactored panning code to avoid need to do pointer grab.

	* src/hd-util.c:
	* src/hd-util.h:
	Remove unnecessary functions.

	* src/Makefile.am
	* src/hd-comp-mgr.c
	* src/hd-wm.c:
	* src/hd-desktop.h:
	* src/hd-desktop.c:
	* src/hd-home-applet.c
	Custom MBWindowManagerClient subclass for our input-only desktop
	window.

2008-06-03  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	* src/hd-home.h:
	* src/hd-home-view.c:
	* src/hd-home-view.h:
	Handle applet removal.

2008-06-03  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	* src/hd-home.h:
	* src/hd-home-view.c:
	Forwarding of events to applets.

	* src/hd-util.c:
	* src/hd-util.h:
	(hd_util_ungrab_pointer):
	Added return value.

2008-06-03  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c:
	* src/hd-home-view.c:
	* src/hd-home-view.h:
	* src/hd-home.c:
	* src/hd-home.h:
	Attach applets to a home view.

2008-06-03  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c:
	(hd_comp_mgr_restack):
	If only home applets are present, put home into active input mode.

2008-06-03  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-atoms.c:
	* src/hd-atoms.h:
	New atoms for home applet type.

	* src/hd-comp-mgr.c:
	* src/hd-comp-mgr.h:
	(hd_comp_mgr_get_atom):
	Public accessor for the custom atom cache.

	* src/hd-home-view.c:
	* src/hd-home.c:
	Added HdHomeView::id construction property to persistently
	identify given view.

	* src/hd-wm.h:
	HdWmClientType enum for client types.

	* src/hd-wm.c
	Subclassed MBWindowManager::client_new().

	* src/Makefile.am:
	* src/hd-home-applet.h:
	* src/hd-home-applet.c:
	Start of custom client type for home applets.

2008-06-03  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	(hd_home_pan_full):
	Deal with view rollover.

2008-06-02  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home-view.c:
	Added construction time "home" property.
	Refactored motion handling.

	* src/hd-home.c:
	* src/hd-home.h:
	Translate view motion events to panning.

	* src/hd-util.c:
	(hd_util_grab_pointer):
	Added motion event mask.

2008-06-02  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c:
	(hd_comp_mgr_restack):
	Put Home into active input mode when no application windows are
	present.

	src/hd-home-view.c:
	src/hd-home-view.h:
	src/hd-home.c:
	src/hd-home.h:
	Added active input mode for the Home actor when Home is
	on the top (all button events are getting trapped within Home
	views and only forwarded to children when appropriate).

	Added HdHome::background-clicked signal.

2008-06-02  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c

	* src/hd-home-view.c:
	* src/hd-home-view.h:
	Added ClutterButtonEvent parameter to thumbnail-clicked and
	background-clicked signals.

	* src/hd-home.c:
	* src/hd-switcher.c:
	* src/hd-util.c:
	* src/hd-util.h:
	(hd_util_grab_pointer):
	(hd_util_ungrab_pointer):
	Extracted pointer grabbing from home/mgr.

	(hd_util_fake_button_event):
	Function to dispatch fake button events.

2008-05-30  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home-view.c:
	* src/hd-home-view.h:
	Added background-clicked signal.

	* src/hd-home.c:
	* src/hd-home.h:
	Smooth home panning.

2008-05-30  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	(hd_home_show_view):
	Fixed handling of mode and home position.

2008-05-30  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home-view.c:
	* src/hd-home-view.h:
	* src/hd-home.c:
	Added thumbnail mode and thumbnail-clicked for home layout view.

2008-05-30  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	Added new view button; fixed return values in button click
	handlers.

	* src/hd-switcher-group.c:
	* src/hd-switcher.c:
	Fixed return values in button click handlers.

2008-05-30  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	(hd_home_do_layout_layout):
	Added zoom out effect when switching to layout mode.

2008-05-29  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	Start of edit mode.

2008-05-29  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	(hd_home_constructed):
	Removed misplaced hd_home_set_mode() call left over from testing.

2008-05-29  Tomas Frydrych  <tf@o-hand.com>

	* src/back-button.png:
	Placeholder of back button icon.

	* src/hd-home.c:
	Added close and back butttons.

2008-05-29  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-home.c:
	* src/hd-home.h:
	Infrastructure for normal/edit/layout mode; fundamentals of normal
	and layout layouts.

2008-05-29  Tomas Frydrych  <tf@o-hand.com>

	* src/Makefile.am:
	* src/hd-home.c:
	* src/hd-home.h:
	* src/hd-home-view.c:
	* src/hd-home-view.h:
	Added HdHomeView object to represent a single home view.

2008-05-28  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c:
	(hd_comp_mgr_launch_application):
	Added available memory check; UI needed.

2008-05-28  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-switcher-group.c:
	(hd_switcher_group_show_all):
	(hd_switcher_group_hide_all):
	Setup vieport to mask out client decorations as requied by the UI
	spec.

	* src/hd-switcher.c:
	(hd_switcher_item_selected):
	* src/hd-comp-mgr.c:
	(hd_comp_mgr_unregister_client):
	Fixed incorrect GObject data key.

2008-05-28  Tomas Frydrych  <tf@o-hand.com>

	* src/hibernation-icon.png:
	stub for an hibernation icon.

2008-05-28  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c:
	* src/hd-comp-mgr.h:
	* src/hd-switcher.c:
	Waking up of hibernated applications via switcher.

2008-05-28  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-dbus.c:
	* src/hd-dbus.h:
	(hd_dbus_launch_service):
	Helper method for the below.

	* src/hd-comp-mgr.c:
	* src/hd-comp-mgr.h:
	(hd_comp_mgr_launch_application):
	Method to launch applications over dbus.

2008-05-28  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-switcher-group.c:
	(hd_switcher_group_show_all):
	Added TODO comment.

2008-05-28  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-atoms.c:
	* src/hd-atoms.h:
	* src/hd-comp-mgr.c:
	* src/hd-switcher-group.c:
	* src/hd-switcher-group.h:
	* src/hd-switcher.c:
	* src/hd-switcher.h:
	Handle weaking up of hibernated applications.

2008-05-27  Tomas Frydrych  <tf@o-hand.com>

	* src/Makefile.am:
	Added -D_XOPEN_SOURCE (need to access kill()).

	* src/hd-comp-mgr.c:
	* src/hd-comp-mgr.h:
	* src/hd-dbus.c:
	(hd_comp_mgr_close_client):
	(hd_comp_mgr_hibernate_client):
	Made more robust by adding a timed check followed by a kill() for
	applications that refuse to die.

	(hd_comp_mgr_hibernate_client):
	(hd_comp_mgr_hibernate_all):
	Differentiate between applications that know how to hibernate and
	those that do not; added force parameter to override.

2008-05-27  Tomas Frydrych  <tf@o-hand.com>

	* configure.ac:
	Added dbus to required packages.

	* src/Makefile.am:
	Added hd-atom.[ch] hd-dbus.[ch] and hd-util.[ch] to build.

	* src/hd-comp-mgr.c:
	* src/hd-comp-mgr.h:
	Added dbus hook for hibernation signal,
	Subclassed MBWMCompMgrClutterClient and moved our flags into
	HdCompMgrClientPrivate.

2008-05-23  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c:
	* src/hd-comp-mgr.h:
	* src/hd-switcher-group.c:
	Start of implementation of hibernation infrastructure.

2008-05-23  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c:
	* src/hd-comp-mgr.h:
	* src/hd-switcher.c:
	Moved HdHome object from HdSwitcher into the CM; handle events on
	the Home actor.

2008-05-23  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-switcher-group.c:
	(hd_switcher_group_show_all):
	(hd_switcher_group_hide_all):
	Removed temporary workaround not necessary now that HdHome is
	present.

2008-05-23  Tomas Frydrych  <tf@o-hand.com>

	* src/Makefile.am:
	* src/hd-home.h:
	* src/hd-home.c:
	Initial stubs for the Home object.

	* src/hd-switcher.c:
	(hd_switcher_constructed):
	(hd_switcher_clicked):
	(hd_switcher_hide_switcher):
	Integrated HdHome object into the WM.

2008-05-22  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-mgr.c:
	(hd_comp_mgr_effect):
	Implemented TV-out style effect for application windows.

2008-05-22  Tomas Frydrych  <tf@o-hand.com>

	Cleaned up comments and code.

2008-05-22  Tomas Frydrych  <tf@o-hand.com>

	Removed stale files.

2008-05-22  Tomas Frydrych  <tf@o-hand.com>

	Simplified compositor by subclassing MBWM2's Clutter compositor.

2008-05-14  Tomas Frydrych  <tf@o-hand.com>

	* src/hd-comp-window.c:
	* src/hd-switcher.c:
	Sync up with upstream changes in clutter API.

